{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"py-5\"\n};\nconst _hoisted_2 = {\n  class: \"flex items-center space-x-5 ml-3 md:ml-16\"\n};\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = {\n  class: \"flex flex-col\"\n};\nconst _hoisted_5 = {\n  class: \"flex flex-col ml-3 h-12 md:flex-row md:items-center md:space-x-3 mt-4\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"text-sm font-semibold md:text-md md:w-10\"\n}, \"Name\", -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  class: \"flex flex-col ml-3 h-12 md:flex-row md:items-center md:space-x-3 mt-8\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"text-sm font-semibold md:text-md md:w-10\"\n}, \"Bio\", -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = {\n  class: \"flex flex-col ml-3 h-12 md:flex-row md:items-center md:space-x-3 mt-4\"\n};\n\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"text-sm font-semibold md:text-md md:w-10\"\n}, \"Email\", -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  return _openBlock(), _createElementBlock(\"section\", null, [$setup.currentUser ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"img\", {\n    src: require('./../../assets/' + $setup.currentUser.avatar),\n    alt: \"\",\n    class: \"h-10 w-10 md:h-14 md:w-14 rounded-full\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_3), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_router_link, {\n    to: '/user/' + $setup.currentUser.id + '?currentUserId=' + $setup.currentUser.id,\n    class: \"text-lg font-semibold hover:underline hover:decoration-solid\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.currentUser.username), 1\n    /* TEXT */\n    )]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"to\"]), _createCommentVNode(\" <p class=\\\" text-lg font-semibold\\\">{{ currentUser.username }}</p> \"), _createElementVNode(\"input\", {\n    type: \"file\",\n    onChange: $setup.inputChangeAvatar,\n    class: \"hidden\",\n    ref: \"changeAvatarInput\"\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => $setup.btnChangeAvatar()),\n    class: \"text-sm text-sky-500 hover:underline hover:decoration-solid\"\n  }, \" Change avatar \")])]), _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.nameInput = $event),\n    class: \"h-full pl-2 py-1 border-2 border-gray-200 flex-1 outline-none rounded-sm shadow-sm shadow-gray-500/50\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.nameInput]])]), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"textarea\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.bioInput = $event),\n    class: \"h-10 md:h-12 pl-2 py-1 border-2 border-gray-200 flex-1 outline-none rounded-sm shadow-sm shadow-gray-500/50\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.bioInput]])]), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.emailInput = $event),\n    class: \"h-full pl-2 border-2 py-1 border-gray-200 flex-1 outline-none rounded-sm shadow-sm shadow-gray-500/50\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.emailInput]])]), _createCommentVNode(\" <div class=\\\" flex items-center h-9\\\">\\r\\n                <div class=\\\" min-w-32\\\">Password</div>\\r\\n                <input type=\\\"text\\\" class=\\\" h-full pl-2 border-2 border-gray-200 flex-1 outline-none shadow-sm shadow-gray-500/50\\\"\\r\\n                        placeholder=\\\"Leave blank if you don't want to change it\\\">\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\" flex items-center h-9\\\">\\r\\n                <div class=\\\" w-32\\\">Password Confirmation</div>\\r\\n                <input type=\\\"text\\\" class=\\\" h-full pl-2 border-2 border-gray-200 flex-1 outline-none shadow-sm shadow-gray-500/50\\\">\\r\\n            </div> \"), _createElementVNode(\"button\", {\n    class: \"ml-3 mt-10 lg:ml-16 px-2 py-1 text-white hover:bg-blue-400 rounded-sm bg-blue-500 shadow-lg shadow-blue-500/50\",\n    onClick: $setup.update\n  }, \" Update \")])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"mappings":";;;EAEgCA,KAAK,EAAC;;;EACrBA,KAAK,EAAC;;;;EAEFA,KAAK,EAAC;;;EAaVA,KAAK,EAAC;;;gCACPC,oBAAiE,KAAjE,EAAiE;EAA5DD,KAAK,EAAC;AAAsD,CAAjE,EAAuD,MAAvD,EAA2D;AAAA;AAA3D;;;EAICA,KAAK,EAAC;;;gCACPC,oBAAgE,KAAhE,EAAgE;EAA3DD,KAAK,EAAC;AAAqD,CAAhE,EAAuD,KAAvD,EAA0D;AAAA;AAA1D;;;EAICA,KAAK,EAAC;;;iCACPC,oBAAkE,KAAlE,EAAkE;EAA7DD,KAAK,EAAC;AAAuD,CAAlE,EAAuD,OAAvD,EAA4D;AAAA;AAA5D;;;;;uBA5BZE,oBAgDU,SAhDV,EAgDU,IAhDV,EAgDU,CA/CKC,oCAAXD,oBA8CM,KA9CN,cA8CM,CA7CFD,oBAaM,KAbN,cAaM,CAZFA,oBAAmH,KAAnH,EAAmH;IAA7GG,GAAG,EAAEC,OAAO,qBAAqBF,mBAAYG,MAAjC,CAAiG;IAAvDC,GAAG,EAAC,EAAmD;IAAhDP,KAAK,EAAC;EAA0C,CAAnH;;EAAA,aAYE,EAXFC,oBAUM,KAVN,cAUM,CATFO,aAGcC,sBAHd,EAGc;IAHAC,EAAE,aAAYP,mBAAYQ,EAAxB,GAA0B,iBAA1B,GAA+CR,mBAAYQ,EAG7D;IAFFX,KAAK,EAAC;EAEJ,CAHd;sBAEI,MAA0B,mCAAvBG,mBAAYS,WAAQ;IAAA;KAAG;;;;GAF9B;;EAAA,SASE,EALFC,2FAKE,EAJFZ,oBAAuF,OAAvF,EAAuF;IAAhFa,IAAI,EAAC,MAA2E;IAAnEC,QAAM,EAAEZ,wBAA2D;IAAxCH,KAAK,EAAC,QAAkC;IAAxBgB,GAAG,EAAC;EAAoB,CAAvF;;EAAA,CAIE,EAHFf,oBAES,QAFT,EAES;IAFAgB,OAAK,sCAAEd,wBAAF,CAEL;IAF0BH,KAAK,EAAC;EAEhC,CAFT,EAAwG,iBAAxG,CAGE,CAVN,CAWE,CAbN,CA6CE,EA9BFC,oBAGM,KAHN,cAGM,CAFFiB,UAEE,kBADFjB,oBAAsJ,OAAtJ,EAAsJ;IAA/Ia,IAAI,EAAC,MAA0I;+DAA1HX,mBAASgB,OAAiH;IAA/GnB,KAAK,EAAC;EAAyG,CAAtJ;;EAAA,kBAA4BG,mBAC1B,CAHN,CA8BE,EAzBFF,oBAGM,KAHN,cAGM,CAFFmB,UAEE,kBADFnB,oBAAyK,UAAzK,EAAyK;IAA/Ja,IAAI,EAAC,MAA0J;+DAA1IX,kBAAQgB,OAAkI;IAAhInB,KAAK,EAAC;EAA0H,CAAzK;;EAAA,kBAA+BG,kBAC7B,CAHN,CAyBE,EApBFF,oBAGM,KAHN,cAGM,CAFFoB,WAEE,kBADFpB,oBAAuJ,OAAvJ,EAAuJ;IAAhJa,IAAI,EAAC,MAA2I;+DAA3HX,oBAAUgB,OAAiH;IAA/GnB,KAAK,EAAC;EAAyG,CAAvJ;;EAAA,kBAA4BG,oBAC1B,CAHN,CAoBE,EAfFU,8oBAeE,EALFZ,oBAGS,QAHT,EAGS;IAHDD,KAAK,EAAC,gHAGL;IAFkDiB,OAAK,EAAEd;EAEzD,CAHT,EAC0E,UAD1E,CAKE,CA9CN,sCA+CM,CAhDV","names":["class","_createElementVNode","_createElementBlock","$setup","src","require","avatar","alt","_createVNode","_component_router_link","to","id","username","_createCommentVNode","type","onChange","ref","onClick","_hoisted_6","$event","_hoisted_8","_hoisted_10"],"sourceRoot":"","sources":["E:\\LapTrinh\\NestJS\\social-media-clone\\frontend\\src\\components\\EditUser\\EditBasicInfo.vue"],"sourcesContent":["<template>\r\n    <section>\r\n        <div v-if=\"currentUser\" class=\" py-5\">\r\n            <div class=\" flex items-center space-x-5 ml-3 md:ml-16\">\r\n                <img :src=\"require('./../../assets/' + currentUser.avatar)\" alt=\"\" class=\" h-10 w-10 md:h-14 md:w-14 rounded-full\">\r\n                <div class=\" flex flex-col\">\r\n                    <router-link :to=\"'/user/' +currentUser.id+ '?currentUserId=' +currentUser.id\" \r\n                                class=\" text-lg font-semibold hover:underline hover:decoration-solid\">\r\n                        {{ currentUser.username }}\r\n                    </router-link>\r\n                    <!-- <p class=\" text-lg font-semibold\">{{ currentUser.username }}</p> -->\r\n                    <input type=\"file\" @change=\"inputChangeAvatar\" class=\" hidden\" ref=\"changeAvatarInput\">\r\n                    <button @click=\"btnChangeAvatar()\" class=\" text-sm text-sky-500 hover:underline hover:decoration-solid\">\r\n                        Change avatar\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            \r\n            <div class=\" flex flex-col ml-3 h-12 md:flex-row md:items-center md:space-x-3 mt-4\">\r\n                <div class=\" text-sm font-semibold md:text-md md:w-10\">Name</div>\r\n                <input type=\"text\" v-model=\"nameInput\" class=\" h-full pl-2 py-1 border-2 border-gray-200 flex-1 outline-none rounded-sm shadow-sm shadow-gray-500/50\">\r\n            </div>\r\n\r\n            <div class=\" flex flex-col ml-3 h-12 md:flex-row md:items-center md:space-x-3 mt-8\">\r\n                <div class=\" text-sm font-semibold md:text-md md:w-10\">Bio</div>\r\n                <textarea type=\"text\" v-model=\"bioInput\" class=\" h-10 md:h-12 pl-2 py-1 border-2 border-gray-200 flex-1 outline-none rounded-sm shadow-sm shadow-gray-500/50\"></textarea>\r\n            </div>\r\n\r\n            <div class=\" flex flex-col ml-3 h-12 md:flex-row md:items-center md:space-x-3 mt-4\">\r\n                <div class=\" text-sm font-semibold md:text-md md:w-10\">Email</div>\r\n                <input type=\"text\" v-model=\"emailInput\" class=\" h-full pl-2 border-2 py-1 border-gray-200 flex-1 outline-none rounded-sm shadow-sm shadow-gray-500/50\">\r\n            </div>\r\n\r\n            <!-- <div class=\" flex items-center h-9\">\r\n                <div class=\" min-w-32\">Password</div>\r\n                <input type=\"text\" class=\" h-full pl-2 border-2 border-gray-200 flex-1 outline-none shadow-sm shadow-gray-500/50\"\r\n                        placeholder=\"Leave blank if you don't want to change it\">\r\n            </div>\r\n\r\n            <div class=\" flex items-center h-9\">\r\n                <div class=\" w-32\">Password Confirmation</div>\r\n                <input type=\"text\" class=\" h-full pl-2 border-2 border-gray-200 flex-1 outline-none shadow-sm shadow-gray-500/50\">\r\n            </div> -->\r\n            <button class=\" ml-3 mt-10 lg:ml-16 px-2 py-1 text-white hover:bg-blue-400 rounded-sm\r\n                            bg-blue-500 shadow-lg shadow-blue-500/50\" @click=\"update\">\r\n                            Update\r\n            </button>\r\n\r\n        </div>\r\n    </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref } from 'vue';\r\nimport axios from \"axios\";\r\nimport { displayToast, dangerColor, successColor } from './../../composables/DisplayToast.js'\r\n\r\nconst currentUser = ref(null);\r\nconst nameInput = ref('');\r\nconst bioInput = ref('');\r\nconst emailInput = ref('');\r\nconst changeAvatarInput = ref(null);\r\n\r\nconst btnChangeAvatar = (e) => {\r\n    changeAvatarInput.value.click();\r\n}\r\n\r\nconst inputChangeAvatar = async (e) => {\r\n    console.log(e.target.files[0].name);\r\n    let formData = new FormData();\r\n    formData.append('image', e.target.files[0]);\r\n    try {        \r\n        const response = await axios\r\n                .patch('http://localhost:3000/users/change-avatar', formData, {\r\n                    headers: {\r\n                        Accept: \"application/json\",\r\n                        \"Content-Type\": \"multipart/form-data\",\r\n                    },\r\n                    withCredentials: true,\r\n                });\r\n        displayToast('New avatar uploaded successfully', successColor)\r\n        currentUser.value = response.data;\r\n    } catch (error) {\r\n        displayToast('Upload failed', dangerColor);\r\n    }\r\n}\r\n\r\nconst update = async () => {\r\n    const data = {name: nameInput.value, bio: bioInput.value, email: emailInput.value};\r\n    try {\r\n        const response = await axios\r\n            .patch(`http://localhost:3000/users/${currentUser.value.id}`, data, {\r\n                headers: {\r\n                    Accept: \"application/json\",\r\n                    \"Content-Type\": \"application/json;charset=UTF-8\",\r\n                },\r\n                withCredentials: true,\r\n            });\r\n        if(response.data) {\r\n            displayToast('Save successfully', successColor);\r\n        }\r\n    } catch (error) {\r\n        displayToast('Save failed', dangerColor);\r\n    }\r\n}\r\n\r\nonMounted( async() => {\r\n    try {\r\n        const response = await axios.get('http://localhost:3000/users/currentuser', {withCredentials: true});\r\n        console.log(response.data);\r\n        currentUser.value = response.data;\r\n        console.log(currentUser.value);\r\n        nameInput.value = currentUser.value.name;\r\n        bioInput.value = currentUser.value.bio;\r\n        emailInput.value = currentUser.value.email;\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n})\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}