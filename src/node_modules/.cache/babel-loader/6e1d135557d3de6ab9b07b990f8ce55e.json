{"ast":null,"code":"import { Observable } from '../../Observable';\nimport { performanceTimestampProvider } from '../../scheduler/performanceTimestampProvider';\nimport { animationFrameProvider } from '../../scheduler/animationFrameProvider';\nexport function animationFrames(timestampProvider) {\n  return timestampProvider ? animationFramesFactory(timestampProvider) : DEFAULT_ANIMATION_FRAMES;\n}\n\nfunction animationFramesFactory(timestampProvider) {\n  return new Observable(function (subscriber) {\n    var provider = timestampProvider || performanceTimestampProvider;\n    var start = provider.now();\n    var id = 0;\n\n    var run = function () {\n      if (!subscriber.closed) {\n        id = animationFrameProvider.requestAnimationFrame(function (timestamp) {\n          id = 0;\n          var now = provider.now();\n          subscriber.next({\n            timestamp: timestampProvider ? now : timestamp,\n            elapsed: now - start\n          });\n          run();\n        });\n      }\n    };\n\n    run();\n    return function () {\n      if (id) {\n        animationFrameProvider.cancelAnimationFrame(id);\n      }\n    };\n  });\n}\n\nvar DEFAULT_ANIMATION_FRAMES = animationFramesFactory();","map":{"version":3,"mappings":"AAAA,SAASA,UAAT,QAA2B,kBAA3B;AAEA,SAASC,4BAAT,QAA6C,8CAA7C;AACA,SAASC,sBAAT,QAAuC,wCAAvC;AAuEA,OAAM,SAAUC,eAAV,CAA0BC,iBAA1B,EAA+D;EACnE,OAAOA,iBAAiB,GAAGC,sBAAsB,CAACD,iBAAD,CAAzB,GAA+CE,wBAAvE;AACD;;AAMD,SAASD,sBAAT,CAAgCD,iBAAhC,EAAqE;EACnE,OAAO,IAAIJ,UAAJ,CAAuD,UAACO,UAAD,EAAW;IAIvE,IAAMC,QAAQ,GAAGJ,iBAAiB,IAAIH,4BAAtC;IAMA,IAAMQ,KAAK,GAAGD,QAAQ,CAACE,GAAT,EAAd;IAEA,IAAIC,EAAE,GAAG,CAAT;;IACA,IAAMC,GAAG,GAAG;MACV,IAAI,CAACL,UAAU,CAACM,MAAhB,EAAwB;QACtBF,EAAE,GAAGT,sBAAsB,CAACY,qBAAvB,CAA6C,UAACC,SAAD,EAAwC;UACxFJ,EAAE,GAAG,CAAL;UAQA,IAAMD,GAAG,GAAGF,QAAQ,CAACE,GAAT,EAAZ;UACAH,UAAU,CAACS,IAAX,CAAgB;YACdD,SAAS,EAAEX,iBAAiB,GAAGM,GAAH,GAASK,SADvB;YAEdE,OAAO,EAAEP,GAAG,GAAGD;UAFD,CAAhB;UAIAG,GAAG;QACJ,CAfI,CAAL;MAgBD;IACF,CAnBD;;IAqBAA,GAAG;IAEH,OAAO;MACL,IAAID,EAAJ,EAAQ;QACNT,sBAAsB,CAACgB,oBAAvB,CAA4CP,EAA5C;MACD;IACF,CAJD;EAKD,CAzCM,CAAP;AA0CD;;AAMD,IAAML,wBAAwB,GAAGD,sBAAsB,EAAvD","names":["Observable","performanceTimestampProvider","animationFrameProvider","animationFrames","timestampProvider","animationFramesFactory","DEFAULT_ANIMATION_FRAMES","subscriber","provider","start","now","id","run","closed","requestAnimationFrame","timestamp","next","elapsed","cancelAnimationFrame"],"sourceRoot":"","sources":["../../../../../src/internal/observable/dom/animationFrames.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}