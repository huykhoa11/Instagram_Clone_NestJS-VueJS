{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"space-y-4 py-5\"\n};\nconst _hoisted_2 = {\n  class: \"flex items-center space-x-5 ml-3 lg:ml-16\"\n};\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = {\n  class: \"text-lg font-semibold\"\n};\nconst _hoisted_5 = {\n  class: \"flex flex-col ml-3 h-12 md:flex-row md:items-center lg:h-9\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"text-sm font-semibold md:text-md lg:w-10\"\n}, \"Old password\", -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  class: \"flex flex-col ml-3 h-12 md:flex-row md:items-center lg:h-9\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"text-sm font-semibold md:text-md lg:w-10\"\n}, \"New password\", -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = {\n  class: \"flex flex-col ml-3 h-12 md:flex-row md:items-center lg:h-9\"\n};\n\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"text-sm font-semibold md:text-md lg:w-10\"\n}, \"Password Confirmation\", -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"section\", null, [$setup.currentUser ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"img\", {\n    src: require('./../../assets/' + $setup.currentUser.avatar),\n    alt: \"\",\n    class: \"h-10 w-10 md:h-14 md:w rounded-full\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_3), _createElementVNode(\"p\", _hoisted_4, _toDisplayString($setup.currentUser.username), 1\n  /* TEXT */\n  )]), _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.oldPassword = $event),\n    class: \"h-full pl-2 border-2 rounded-md bg-gray-100 flex-1 outline-none shadow-sm\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.oldPassword]])]), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.newPassword = $event),\n    class: \"h-full pl-2 border-2 rounded-md bg-gray-100 flex-1 outline-none shadow-sm\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.newPassword]])]), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.confirmNewPassword = $event),\n    class: \"h-full pl-2 border-2 rounded-md bg-gray-100 flex-1 outline-none shadow-sm\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.confirmNewPassword]])]), _createElementVNode(\"button\", {\n    class: \"ml-3 px-2 py-1 text-white hover:bg-blue-400 rounded-sm bg-blue-500 shadow-lg shadow-blue-500/50\",\n    onClick: $setup.update\n  }, \" Update \")])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"mappings":";;;EAEgCA,KAAK,EAAC;;;EACrBA,KAAK,EAAC;;;;EAEJA,KAAK,EAAC;;;EAGRA,KAAK,EAAC;;;gCACPC,oBAAyE,KAAzE,EAAyE;EAApED,KAAK,EAAC;AAA8D,CAAzE,EAAuD,cAAvD,EAAmE;AAAA;AAAnE;;;EAICA,KAAK,EAAC;;;gCACPC,oBAAyE,KAAzE,EAAyE;EAApED,KAAK,EAAC;AAA8D,CAAzE,EAAuD,cAAvD,EAAmE;AAAA;AAAnE;;;EAICA,KAAK,EAAC;;;iCACPC,oBAAkF,KAAlF,EAAkF;EAA7ED,KAAK,EAAC;AAAuE,CAAlF,EAAuD,uBAAvD,EAA4E;AAAA;AAA5E;;;uBAlBZE,oBA2BU,SA3BV,EA2BU,IA3BV,EA2BU,CA1BKC,oCAAXD,oBAyBM,KAzBN,cAyBM,CAxBFD,oBAGM,KAHN,cAGM,CAFFA,oBAAgH,KAAhH,EAAgH;IAA1GG,GAAG,EAAEC,OAAO,qBAAqBF,mBAAYG,MAAjC,CAA8F;IAApDC,GAAG,EAAC,EAAgD;IAA7CP,KAAK,EAAC;EAAuC,CAAhH;;EAAA,aAEE,EADFC,oBAAgE,GAAhE,cAAgEO,iBAA3BL,mBAAYM,QAAe,CAAhE,EAAyD;EAAA;EAAzD,CACE,CAHN,CAwBE,EAnBFR,oBAGM,KAHN,cAGM,CAFFS,UAEE,kBADFT,oBAAiI,OAAjI,EAAiI;IAA1HU,IAAI,EAAC,UAAqH;+DAAjGR,qBAAWS,OAAsF;IAApFZ,KAAK,EAAC;EAA8E,CAAjI;;EAAA,kBAAgCG,qBAC9B,CAHN,CAmBE,EAdFF,oBAGM,KAHN,cAGM,CAFFY,UAEE,kBADFZ,oBAAiI,OAAjI,EAAiI;IAA1HU,IAAI,EAAC,UAAqH;+DAAjGR,qBAAWS,OAAsF;IAApFZ,KAAK,EAAC;EAA8E,CAAjI;;EAAA,kBAAgCG,qBAC9B,CAHN,CAcE,EATFF,oBAGM,KAHN,cAGM,CAFFa,WAEE,kBADFb,oBAAuI,OAAvI,EAAuI;IAAhIU,IAAI,EAAC,UAA2H;+DAAvGR,4BAAkBS,OAAqF;IAAnFZ,KAAK,EAAC;EAA6E,CAAvI;;EAAA,kBAAgCG,4BAC9B,CAHN,CASE,EAJFF,oBAGS,QAHT,EAGS;IAHDD,KAAK,EAAC,iGAGL;IAFkDe,OAAK,EAAEZ;EAEzD,CAHT,EAC0E,UAD1E,CAIE,CAzBN,sCA0BM,CA3BV","names":["class","_createElementVNode","_createElementBlock","$setup","src","require","avatar","alt","_toDisplayString","username","_hoisted_6","type","$event","_hoisted_8","_hoisted_10","onClick"],"sourceRoot":"","sources":["E:\\LapTrinh\\NestJS\\social-media-clone\\frontend\\src\\components\\EditUser\\EditPassword.vue"],"sourcesContent":["<template>\r\n    <section>\r\n        <div v-if=\"currentUser\" class=\" space-y-4 py-5\">\r\n            <div class=\" flex items-center space-x-5 ml-3 lg:ml-16\">\r\n                <img :src=\"require('./../../assets/' + currentUser.avatar)\" alt=\"\" class=\" h-10 w-10 md:h-14 md:w rounded-full\">\r\n                <p class=\" text-lg font-semibold\">{{ currentUser.username }}</p>\r\n            </div>\r\n\r\n            <div class=\" flex flex-col ml-3 h-12 md:flex-row md:items-center lg:h-9\">\r\n                <div class=\" text-sm font-semibold md:text-md lg:w-10\">Old password</div>\r\n                <input type=\"password\" v-model=\"oldPassword\" class=\" h-full pl-2 border-2 rounded-md bg-gray-100 flex-1 outline-none shadow-sm \">\r\n            </div>\r\n\r\n            <div class=\" flex flex-col ml-3 h-12 md:flex-row md:items-center lg:h-9\">\r\n                <div class=\" text-sm font-semibold md:text-md lg:w-10\">New password</div>\r\n                <input type=\"password\" v-model=\"newPassword\" class=\" h-full pl-2 border-2 rounded-md bg-gray-100 flex-1 outline-none shadow-sm \">\r\n            </div>\r\n\r\n            <div class=\" flex flex-col ml-3 h-12 md:flex-row md:items-center lg:h-9\">\r\n                <div class=\" text-sm font-semibold md:text-md lg:w-10\">Password Confirmation</div>\r\n                <input type=\"password\" v-model=\"confirmNewPassword\" class=\" h-full pl-2 border-2 rounded-md bg-gray-100 flex-1 outline-none shadow-sm\">\r\n            </div>\r\n\r\n            <button class=\" ml-3 px-2 py-1 text-white hover:bg-blue-400 rounded-sm\r\n                            bg-blue-500 shadow-lg shadow-blue-500/50\" @click=\"update\">\r\n                            Update\r\n            </button>\r\n        </div>\r\n    </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref } from 'vue';\r\nimport axios from \"axios\";\r\nimport { displayToast, dangerColor, successColor } from './../../composables/DisplayToast.js';\r\n\r\nconst currentUser = ref(null);\r\n\r\nconst oldPassword = ref('');\r\nconst newPassword = ref('');\r\nconst confirmNewPassword = ref('');\r\n\r\nconst update = async () => {\r\n    if(newPassword.value === confirmNewPassword.value) {\r\n        const data = {password: newPassword.value};\r\n        try {\r\n            const response = await axios\r\n                .patch(`http://localhost:3000/users/edit-password/${currentUser.value.id}`, data, {\r\n                    headers: {\r\n                        Accept: \"application/json\",\r\n                        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n                    },\r\n                    withCredentials: true,\r\n                });\r\n            if(response.data) {\r\n                displayToast('Save new password successfully', successColor);\r\n                oldPassword.value = '';\r\n                newPassword.value = '';\r\n                confirmNewPassword.value = '';\r\n            }\r\n        } catch (error) {\r\n            displayToast('Wrong input current password', dangerColor);\r\n        }\r\n    }\r\n    else {\r\n        displayToast('Confirm password entry is not match', dangerColor)\r\n    }\r\n\r\n    \r\n}\r\n\r\nonMounted( async() => {\r\n    try {\r\n        const response = await axios.get('http://localhost:3000/users/currentuser', {withCredentials: true});\r\n        console.log(response.data);\r\n        currentUser.value = response.data;\r\n        console.log(currentUser.value);\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n})\r\n</script>"]},"metadata":{},"sourceType":"module"}