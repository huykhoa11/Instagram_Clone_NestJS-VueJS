{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { useStore } from 'vuex';\nimport { useRouter } from \"vue-router\";\nimport { computed, onMounted, ref } from 'vue';\nimport { searchUserbyUsername, spin } from './../composables/Fetch.js';\nimport { displayToast, dangerColor, successColor } from './../composables/DisplayToast.js';\nimport axios from 'axios';\nexport default {\n  __name: 'NavBar',\n\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const router = useRouter();\n    const store = useStore();\n    const username = ref(null);\n    const currentUser = ref(null);\n    const inputSearchUser = ref('');\n\n    const searchUserEvent = async () => {\n      const searchBtnElement = document.getElementById('searchBtn');\n      const tmp = searchBtnElement.innerHTML;\n      searchBtnElement.innerHTML = spin('gray');\n\n      try {\n        const searchUserId = await searchUserbyUsername(inputSearchUser.value);\n        router.push(`http://localhost:8080/user/${searchUserId}?currentUserId=${currentUser.value.id}`);\n      } catch (error) {\n        console.log(error);\n        searchBtnElement.innerHTML = tmp;\n        displayToast(`User ${inputSearchUser.value} doesn't exist`, dangerColor);\n      }\n    };\n\n    const signOut = async () => {\n      const signOutBtnElement = document.getElementById('signOutBtn');\n      signOutBtnElement.disabled = true;\n      signOutBtnElement.className = 'text-pink-500';\n      signOutBtnElement.innerText = 'Signing out...';\n      await axios.delete('http://localhost:3000/auth/signout', {\n        withCredentials: true\n      });\n      localStorage.removeItem('username'); // router.push('/auth/signin')\n\n      username.value = '';\n      window.location.replace(\"http://localhost:8080/auth/signin\");\n    };\n\n    onMounted(async () => {\n      try {\n        const response = await axios.get('http://localhost:3000/users/currentuser', {\n          withCredentials: true\n        });\n        currentUser.value = response.data;\n        username.value = localStorage.getItem('username');\n        console.log(username.value);\n      } catch (error) {\n        if (localStorage.getItem('username')) {\n          localStorage.removeItem('username');\n        }\n      }\n    });\n    const __returned__ = {\n      router,\n      store,\n      username,\n      currentUser,\n      inputSearchUser,\n      searchUserEvent,\n      signOut,\n      useStore,\n      useRouter,\n      computed,\n      onMounted,\n      ref,\n      searchUserbyUsername,\n      spin,\n      displayToast,\n      dangerColor,\n      successColor,\n      axios\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":";AA8DA,SAASA,QAAT,QAAyB,MAAzB;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,GAA9B,QAAyC,KAAzC;AACA,SAASC,oBAAT,EAA+BC,IAA/B,QAA2C,2BAA3C;AACA,SAASC,YAAT,EAAuBC,WAAvB,EAAoCC,YAApC,QAAwD,kCAAxD;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;;;;;;IAEA,MAAMC,MAAM,GAAGV,SAAS,EAAxB;IACA,MAAMW,KAAK,GAAGZ,QAAQ,EAAtB;IAEA,MAAMa,QAAQ,GAAGT,GAAG,CAAC,IAAD,CAApB;IACA,MAAMU,WAAW,GAAGV,GAAG,CAAC,IAAD,CAAvB;IAEA,MAAMW,eAAe,GAAGX,GAAG,CAAC,EAAD,CAA3B;;IAEA,MAAMY,eAAe,GAAG,YAAY;MAClC,MAAMC,gBAAgB,GAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAzB;MACA,MAAMC,GAAG,GAAGH,gBAAgB,CAACI,SAA7B;MACAJ,gBAAgB,CAACI,SAAjB,GAA6Bf,IAAI,CAAC,MAAD,CAAjC;;MACA,IAAI;QACF,MAAMgB,YAAY,GAAG,MAAMjB,oBAAoB,CAACU,eAAe,CAACQ,KAAjB,CAA/C;QACAZ,MAAM,CAACa,IAAP,CAAa,8BAA6BF,YAAa,kBAAiBR,WAAW,CAACS,KAAZ,CAAkBE,EAAG,EAA7F;MACD,CAHD,CAGE,OAAOC,KAAP,EAAc;QACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;QACAT,gBAAgB,CAACI,SAAjB,GAA6BD,GAA7B;QACAb,YAAY,CAAE,QAAOQ,eAAe,CAACQ,KAAM,gBAA/B,EAAgDf,WAAhD,CAAZ;MACD;IACF,CAZD;;IAcA,MAAMqB,OAAO,GAAG,YAAY;MAC1B,MAAMC,iBAAiB,GAAGZ,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAA1B;MACAW,iBAAiB,CAACC,QAAlB,GAA6B,IAA7B;MACAD,iBAAiB,CAACE,SAAlB,GAA8B,eAA9B;MACAF,iBAAiB,CAACG,SAAlB,GAA+B,gBAA/B;MACA,MAAMvB,KAAK,CAACwB,MAAN,CAAa,oCAAb,EAAmD;QAACC,eAAe,EAAE;MAAlB,CAAnD,CAAN;MACAC,YAAY,CAACC,UAAb,CAAwB,UAAxB,EAN0B,CAO1B;;MACAxB,QAAQ,CAACU,KAAT,GAAiB,EAAjB;MACAe,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,mCAAxB;IAED,CAXD;;IAaArC,SAAS,CAAE,YAAY;MACrB,IAAI;QACF,MAAMsC,QAAQ,GAAG,MAAM/B,KAAK,CAACgC,GAAN,CAAU,yCAAV,EAAqD;UAACP,eAAe,EAAE;QAAlB,CAArD,CAAvB;QACArB,WAAW,CAACS,KAAZ,GAAoBkB,QAAQ,CAACE,IAA7B;QACA9B,QAAQ,CAACU,KAAT,GAAiBa,YAAY,CAACQ,OAAb,CAAqB,UAArB,CAAjB;QACAjB,OAAO,CAACC,GAAR,CAAYf,QAAQ,CAACU,KAArB;MACD,CALD,CAKE,OAAOG,KAAP,EAAc;QACd,IAAGU,YAAY,CAACQ,OAAb,CAAqB,UAArB,CAAH,EAAqC;UACnCR,YAAY,CAACC,UAAb,CAAwB,UAAxB;QACD;MACF;IAGF,CAbQ,CAAT","names":["useStore","useRouter","computed","onMounted","ref","searchUserbyUsername","spin","displayToast","dangerColor","successColor","axios","router","store","username","currentUser","inputSearchUser","searchUserEvent","searchBtnElement","document","getElementById","tmp","innerHTML","searchUserId","value","push","id","error","console","log","signOut","signOutBtnElement","disabled","className","innerText","delete","withCredentials","localStorage","removeItem","window","location","replace","response","get","data","getItem"],"sources":["E:/LapTrinh/NestJS/social-media-clone/frontend/src/components/NavBar.vue"],"sourcesContent":["<template>\r\n    <nav class=\" w-full\">\r\n      <div v-if=\"currentUser\" class=\" fixed z-[100] w-full drop-shadow-md h-12 bg-white flex justify-around items-center\">\r\n        <div class=\"flex items-center space-x-5 \">\r\n          <router-link to=\"/homepage\" class=\" text-pink-300 hover:text-white hidden sm:inline-block\">\r\n            <img src=\"./../assets/instagram.png\" alt=\"\" class=\" w-8 h-8\">\r\n          </router-link>\r\n          <div class=\" flex items-center\">\r\n            <input type=\"text\" name=\"q\" placeholder=\"Search User\" v-model=\"inputSearchUser\"\r\n                  class=\" bg-gray-100 border border-gray-200 outline outline-none rounded-md pl-2\">\r\n            <button id=\"searchBtn\" class=\" -translate-x-6\" @click=\"searchUserEvent\"><i class=\"fa-solid fa-magnifying-glass\"></i></button>\r\n          </div>\r\n        </div>\r\n        <div class=\" flex items-center space-x-4\">\r\n          <i class=\"fa-solid fa-house text-lg\"></i>\r\n          <i class=\"fa-solid fa-heart text-lg\"></i>\r\n          <div class=\" group relative\">\r\n            <img :src=\"require('./../assets/' + currentUser.avatar)\" alt=\"\" class=\" w-6 h-6 rounded-full\">\r\n            <div class=\" hidden hover:flex group-hover:flex flex-col w-36 bg-white drop-shadow z-[200] absolute -right-2 top-8\r\n                        before:absolute before:w-full before:h-5 before:-top-4\">\r\n              <div class=\" flex p-2 hover:bg-gray-100 hover:cursor-pointer\">\r\n                <router-link to=\"/homepage\">\r\n                  <i class=\"fa-solid fa-house mr-3\"></i>Home page\r\n                </router-link>\r\n              </div>\r\n              <div class=\" flex p-2 hover:bg-gray-100 hover:cursor-pointer\">\r\n                <router-link :to=\"'/user/' +currentUser.id+ '?currentUserId=' +currentUser.id\">\r\n                  <i class=\"fa-solid fa-user mr-3\"></i>My Page\r\n                </router-link>\r\n              </div>\r\n              <div class=\" flex p-2 hover:bg-gray-100 hover:cursor-pointer\">\r\n                <router-link to=\"/edit-current-user\">\r\n                  <i class=\"fa-solid fa-gear mr-3\"></i>Edit user\r\n                </router-link>\r\n              </div><hr>\r\n              <div id=\"signOutBtn\" @click=\"signOut()\" \r\n                      class=\" text-pink-500 px-2 py-1 hover:text-gray-50 hover:bg-pink-300 cursor-pointer\">\r\n                Sign Out\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n      </div>\r\n\r\n      <!-- <div v-else class=\" fixed z-[100] w-full drop-shadow-md h-12 bg-white font-semibold flex justify-around items-center\">\r\n        <div class=\"\">\r\n          <p class=\" text-pink-500\">Let sign in ^^</p>\r\n        </div>\r\n        <div class=\"\">\r\n          <router-link to=\"/auth/signup\" class=\" text-pink-500 hover:text-white\">Sign Up</router-link>\r\n          <router-link to=\"/auth/signin\" class=\" text-pink-500 hover:text-white\">Sign In</router-link>\r\n        </div>\r\n      </div> -->\r\n\r\n        \r\n    </nav>\r\n    \r\n</template>\r\n\r\n\r\n<script setup>\r\nimport { useStore } from 'vuex';\r\nimport { useRouter } from \"vue-router\"\r\nimport { computed, onMounted, ref } from 'vue';\r\nimport { searchUserbyUsername, spin } from './../composables/Fetch.js';\r\nimport { displayToast, dangerColor, successColor } from './../composables/DisplayToast.js';\r\nimport axios from 'axios';\r\n\r\nconst router = useRouter();\r\nconst store = useStore();\r\n\r\nconst username = ref(null);\r\nconst currentUser = ref(null);\r\n\r\nconst inputSearchUser = ref('');\r\n\r\nconst searchUserEvent = async () => {\r\n  const searchBtnElement = document.getElementById('searchBtn');\r\n  const tmp = searchBtnElement.innerHTML; \r\n  searchBtnElement.innerHTML = spin('gray');\r\n  try {\r\n    const searchUserId = await searchUserbyUsername(inputSearchUser.value);\r\n    router.push(`http://localhost:8080/user/${searchUserId}?currentUserId=${currentUser.value.id}`);\r\n  } catch (error) {\r\n    console.log(error);\r\n    searchBtnElement.innerHTML = tmp;\r\n    displayToast(`User ${inputSearchUser.value} doesn't exist`, dangerColor);\r\n  }\r\n}\r\n\r\nconst signOut = async () => {\r\n  const signOutBtnElement = document.getElementById('signOutBtn');\r\n  signOutBtnElement.disabled = true;\r\n  signOutBtnElement.className = 'text-pink-500';\r\n  signOutBtnElement.innerText =  'Signing out...'\r\n  await axios.delete('http://localhost:3000/auth/signout', {withCredentials: true});\r\n  localStorage.removeItem('username');\r\n  // router.push('/auth/signin')\r\n  username.value = '';\r\n  window.location.replace(\"http://localhost:8080/auth/signin\");\r\n\r\n}\r\n\r\nonMounted( async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:3000/users/currentuser', {withCredentials: true});\r\n    currentUser.value = response.data;\r\n    username.value = localStorage.getItem('username');\r\n    console.log(username.value);\r\n  } catch (error) {\r\n    if(localStorage.getItem('username')) {\r\n      localStorage.removeItem('username');\r\n    }\r\n  }\r\n\r\n  \r\n})\r\n\r\n\r\n</script>\r\n\r\n"]},"metadata":{},"sourceType":"module"}