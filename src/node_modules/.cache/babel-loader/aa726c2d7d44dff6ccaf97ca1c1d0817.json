{"ast":null,"code":"import { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function switchMap(project, resultSelector) {\n  return operate(function (source, subscriber) {\n    var innerSubscriber = null;\n    var index = 0;\n    var isComplete = false;\n\n    var checkComplete = function () {\n      return isComplete && !innerSubscriber && subscriber.complete();\n    };\n\n    source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n      innerSubscriber === null || innerSubscriber === void 0 ? void 0 : innerSubscriber.unsubscribe();\n      var innerIndex = 0;\n      var outerIndex = index++;\n      innerFrom(project(value, outerIndex)).subscribe(innerSubscriber = createOperatorSubscriber(subscriber, function (innerValue) {\n        return subscriber.next(resultSelector ? resultSelector(value, innerValue, outerIndex, innerIndex++) : innerValue);\n      }, function () {\n        innerSubscriber = null;\n        checkComplete();\n      }));\n    }, function () {\n      isComplete = true;\n      checkComplete();\n    }));\n  });\n}","map":{"version":3,"mappings":"AAEA,SAASA,SAAT,QAA0B,yBAA1B;AACA,SAASC,OAAT,QAAwB,cAAxB;AACA,SAASC,wBAAT,QAAyC,sBAAzC;AAiFA,OAAM,SAAUC,SAAV,CACJC,OADI,EAEJC,cAFI,EAEyG;EAE7G,OAAOJ,OAAO,CAAC,UAACK,MAAD,EAASC,UAAT,EAAmB;IAChC,IAAIC,eAAe,GAA0C,IAA7D;IACA,IAAIC,KAAK,GAAG,CAAZ;IAEA,IAAIC,UAAU,GAAG,KAAjB;;IAIA,IAAMC,aAAa,GAAG;MAAM,iBAAU,IAAI,CAACH,eAAf,IAAkCD,UAAU,CAACK,QAAX,EAAlC;IAAuD,CAAnF;;IAEAN,MAAM,CAACO,SAAP,CACEX,wBAAwB,CACtBK,UADsB,EAEtB,UAACO,KAAD,EAAM;MAEJN,eAAe,SAAf,mBAAe,WAAf,GAAe,MAAf,kBAAe,CAAEO,WAAjB;MACA,IAAIC,UAAU,GAAG,CAAjB;MACA,IAAMC,UAAU,GAAGR,KAAK,EAAxB;MAEAT,SAAS,CAACI,OAAO,CAACU,KAAD,EAAQG,UAAR,CAAR,CAAT,CAAsCJ,SAAtC,CACGL,eAAe,GAAGN,wBAAwB,CACzCK,UADyC,EAKzC,UAACW,UAAD,EAAW;QAAK,iBAAU,CAACC,IAAX,CAAgBd,cAAc,GAAGA,cAAc,CAACS,KAAD,EAAQI,UAAR,EAAoBD,UAApB,EAAgCD,UAAU,EAA1C,CAAjB,GAAiEE,UAA/F;MAA0G,CALjF,EAMzC;QAIEV,eAAe,GAAG,IAAlB;QACAG,aAAa;MACd,CAZwC,CAD7C;IAgBD,CAxBqB,EAyBtB;MACED,UAAU,GAAG,IAAb;MACAC,aAAa;IACd,CA5BqB,CAD1B;EAgCD,CA1Ca,CAAd;AA2CD","names":["innerFrom","operate","createOperatorSubscriber","switchMap","project","resultSelector","source","subscriber","innerSubscriber","index","isComplete","checkComplete","complete","subscribe","value","unsubscribe","innerIndex","outerIndex","innerValue","next"],"sourceRoot":"","sources":["../../../../src/internal/operators/switchMap.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}