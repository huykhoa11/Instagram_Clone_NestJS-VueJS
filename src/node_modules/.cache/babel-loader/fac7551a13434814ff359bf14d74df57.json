{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { __read } from \"tslib\";\nimport { innerFrom } from '../observable/innerFrom';\nimport { Observable } from '../Observable';\nimport { mergeMap } from '../operators/mergeMap';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isFunction } from '../util/isFunction';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\nvar nodeEventEmitterMethods = ['addListener', 'removeListener'];\nvar eventTargetMethods = ['addEventListener', 'removeEventListener'];\nvar jqueryMethods = ['on', 'off'];\nexport function fromEvent(target, eventName, options, resultSelector) {\n  if (isFunction(options)) {\n    resultSelector = options;\n    options = undefined;\n  }\n\n  if (resultSelector) {\n    return fromEvent(target, eventName, options).pipe(mapOneOrManyArgs(resultSelector));\n  }\n\n  var _a = __read(isEventTarget(target) ? eventTargetMethods.map(function (methodName) {\n    return function (handler) {\n      return target[methodName](eventName, handler, options);\n    };\n  }) : isNodeStyleEventEmitter(target) ? nodeEventEmitterMethods.map(toCommonHandlerRegistry(target, eventName)) : isJQueryStyleEventEmitter(target) ? jqueryMethods.map(toCommonHandlerRegistry(target, eventName)) : [], 2),\n      add = _a[0],\n      remove = _a[1];\n\n  if (!add) {\n    if (isArrayLike(target)) {\n      return mergeMap(function (subTarget) {\n        return fromEvent(subTarget, eventName, options);\n      })(innerFrom(target));\n    }\n  }\n\n  if (!add) {\n    throw new TypeError('Invalid event target');\n  }\n\n  return new Observable(function (subscriber) {\n    var handler = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return subscriber.next(1 < args.length ? args : args[0]);\n    };\n\n    add(handler);\n    return function () {\n      return remove(handler);\n    };\n  });\n}\n\nfunction toCommonHandlerRegistry(target, eventName) {\n  return function (methodName) {\n    return function (handler) {\n      return target[methodName](eventName, handler);\n    };\n  };\n}\n\nfunction isNodeStyleEventEmitter(target) {\n  return isFunction(target.addListener) && isFunction(target.removeListener);\n}\n\nfunction isJQueryStyleEventEmitter(target) {\n  return isFunction(target.on) && isFunction(target.off);\n}\n\nfunction isEventTarget(target) {\n  return isFunction(target.addEventListener) && isFunction(target.removeEventListener);\n}","map":{"version":3,"mappings":"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","names":["innerFrom","Observable","mergeMap","isArrayLike","isFunction","mapOneOrManyArgs","nodeEventEmitterMethods","eventTargetMethods","jqueryMethods","fromEvent","target","eventName","options","resultSelector","undefined","pipe","isEventTarget","map","methodName","handler","isNodeStyleEventEmitter","toCommonHandlerRegistry","isJQueryStyleEventEmitter","add","remove","subTarget","TypeError","subscriber","args","next","length","addListener","removeListener","on","off","addEventListener","removeEventListener"],"sourceRoot":"","sources":["../../../../src/internal/observable/fromEvent.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}