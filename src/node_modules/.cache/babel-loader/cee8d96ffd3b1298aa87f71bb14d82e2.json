{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"flex justify-around\"\n};\nconst _hoisted_2 = {\n  class: \"w-1/3 h-96 border border-stone-700\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"header\", {\n  class: \"w-full h-1/6 bg-sky-200 text-3xl mb-5\"\n}, \"Sign In\", -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"\"\n}, \"Username\", -1\n/* HOISTED */\n);\n\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"\"\n}, \"Password\", -1\n/* HOISTED */\n);\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"section\", null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _hoisted_4, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"border border-black\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.username = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.username]]), _hoisted_5, _hoisted_6, _hoisted_7, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    class: \"border border-black\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.password = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.password]]), _hoisted_8, _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = $event => $setup.signIn()),\n    class: \"border border-black bg-slate-300 hover:bg-slate-200\",\n    ref: \"signInRef\"\n  }, \"Sign In\", 512\n  /* NEED_PATCH */\n  )])]), _createElementVNode(\"p\", null, _toDisplayString($setup.returnValue), 1\n  /* TEXT */\n  )]);\n}","map":{"version":3,"mappings":";;EAESA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;gCACTC,oBAAuE,QAAvE,EAAuE;EAA/DD,KAAK,EAAC;AAAyD,CAAvE,EAAuD,SAAvD,EAA8D;AAAA;AAA9D;;gCACAC,oBAA8B,OAA9B,EAA8B;EAAvBC,GAAG,EAAC;AAAmB,CAA9B,EAAc,UAAd,EAAsB;AAAA;AAAtB;;gCACkED,oBAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI;AAAA;AAAJ;;gCAAIA,oBAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI;AAAA;AAAJ;;gCACtEA,oBAA8B,OAA9B,EAA8B;EAAvBC,GAAG,EAAC;AAAmB,CAA9B,EAAc,UAAd,EAAsB;AAAA;AAAtB;;gCACsED,oBAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI;AAAA;AAAJ;;;uBAP5EE,oBAcU,SAdV,EAcU,IAdV,EAcU,CAbRF,oBAUM,KAVN,cAUM,CATJA,oBAQM,KARN,cAQM,CAPJG,UAOI,EANJC,UAMI,kBALJJ,oBAAkE,OAAlE,EAAkE;IAA3DK,IAAI,EAAC,MAAsD;IAA/CN,KAAK,EAAC,qBAAyC;+DAAVO,kBAAQC;EAAE,CAAlE;;EAAA,kBAAwDD,kBAKpD,EAL8DE,UAK9D,EALkEC,UAKlE,EAJJC,UAII,kBAHJV,oBAAsE,OAAtE,EAAsE;IAA/DK,IAAI,EAAC,UAA0D;IAA/CN,KAAK,EAAC,qBAAyC;+DAAVO,kBAAQC;EAAE,CAAtE;;EAAA,kBAA4DD,kBAGxD,EAHkEK,UAGlE,EAFJX,oBAAsH,QAAtH,EAAsH;IAA7GY,OAAK,sCAAEN,eAAF,CAAwG;IAA5FP,KAAK,EAAC,qDAAsF;IAAhCc,GAAG,EAAC;EAA4B,CAAtH,EAAsG,SAAtG,EAA6G;EAAA;EAA7G,CAEI,CARN,CASI,CAVN,CAaQ,EAFRb,oBAAwB,GAAxB,EAAwB,IAAxB,EAAwBc,iBAAlBR,kBAAkB,CAAxB,EAAiB;EAAA;EAAjB,CAEQ,CAdV","names":["class","_createElementVNode","for","_createElementBlock","_hoisted_3","_hoisted_4","type","$setup","$event","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","onClick","ref","_toDisplayString"],"sourceRoot":"","sources":["E:\\LapTrinh\\NestJS\\social-media-clone\\frontend\\src\\components\\auth\\SignIn.vue"],"sourcesContent":["<template>\r\n  <section>\r\n    <div class=\" flex justify-around\">\r\n      <div class=\" w-1/3 h-96 border border-stone-700\">\r\n        <header class=\" w-full h-1/6 bg-sky-200 text-3xl mb-5\">Sign In</header>\r\n        <label for=\"\">Username</label>\r\n        <input type=\"text\" class=\"border border-black\" v-model=\"username\"><br><br>\r\n        <label for=\"\">Password</label>\r\n        <input type=\"password\" class=\"border border-black\" v-model=\"password\"><br>\r\n        <button @click=\"signIn()\" class=\"border border-black bg-slate-300 hover:bg-slate-200\" ref=\"signInRef\">Sign In</button>\r\n\r\n      </div>\r\n    </div>\r\n    <p>{{ returnValue }}</p>\r\n\r\n  </section>\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\nimport {useRouter} from \"vue-router\"\r\nimport {useStore} from \"vuex\"\r\n\r\nconst store = useStore();\r\n\r\nconst username = ref('');\r\nconst password = ref('');\r\nconst returnValue = ref('');\r\nconst isAuthenticated = ref(false);\r\nconst router = useRouter();\r\nconst signInRef = ref(null);\r\n\r\nconsole.log(signInRef);\r\n\r\nconst signIn = async () => {\r\n  console.log('inside signIn');\r\n  const data = {\r\n    username: username.value,\r\n    password: password.value,\r\n  };\r\n\r\n  try {\r\n    signInRef.value.disabled = true;\r\n    signInRef.value.classList.toggle('hover:bg-slate-200');\r\n    signInRef.value.innerText = 'loading...';\r\n    const response = await axios.post('http://localhost:3000/auth/signin', data, {\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n      },\r\n      withCredentials: true,\r\n    });\r\n    returnValue.value = response.data;\r\n    isAuthenticated.value = true;\r\n    store.dispatch('getCurrentUser', {username: username.value})\r\n    router.push('/dashboard')\r\n    console.log(returnValue.value);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n\r\n\r\n  // try {\r\n  //   const response = await fetch('http://localhost:3000/auth/signin', {\r\n  //     method: \"POST\",\r\n  //     headers: {'Content-Type': 'application/json',},\r\n  //     body: JSON.stringify(data),\r\n  //   })\r\n  //   returnValue.value = await response.json();\r\n  // } catch (error) {\r\n  //   console.log(error);\r\n  // }\r\n\r\n\r\n\r\n  \r\n};\r\n\r\n</script>\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}