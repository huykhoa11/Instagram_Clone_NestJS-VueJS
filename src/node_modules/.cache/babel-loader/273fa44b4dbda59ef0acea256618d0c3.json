{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { useStore } from 'vuex';\nimport { useRouter } from \"vue-router\";\nimport { computed, onMounted, ref } from 'vue';\nimport { searchUserbyUsername, spin } from './../composables/Fetch.js';\nimport { displayToast, dangerColor, successColor } from './../composables/DisplayToast.js';\nimport { i18n } from './../langs/languages';\nimport axios from 'axios';\nexport default {\n  __name: 'NavBar',\n\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const router = useRouter();\n    const store = useStore();\n    const username = ref(null);\n    const currentUser = ref(null);\n    const inputSearchUser = ref('');\n    const dropDownLanguage = ref(false);\n\n    const toggleDropDown = () => {\n      dropDownLanguage.value = !dropDownLanguage.value;\n    };\n\n    const onBlurToggleDropDown = () => {\n      dropDownLanguage.value = false;\n    };\n\n    const changeLocale = newLocale => {\n      i18n.locale = newLocale;\n    };\n\n    const searchUserEvent = async () => {\n      console.log('inside search event');\n      const searchBtnElement = document.getElementById('searchBtn');\n      const tmp = searchBtnElement.innerHTML;\n      searchBtnElement.innerHTML = spin('gray');\n\n      try {\n        console.log(inputSearchUser.value);\n        const searchUserId = await searchUserbyUsername(inputSearchUser.value);\n        console.log(searchUserId);\n        window.location.replace(`http://localhost:8080/user/${searchUserId}?currentUserId=${currentUser.value.id}`);\n        inputSearchUser.value = '';\n        searchBtnElement.innerHTML = tmp;\n      } catch (error) {\n        console.log(error);\n        searchBtnElement.innerHTML = tmp;\n        displayToast(`User ${inputSearchUser.value} doesn't exist`, dangerColor);\n      }\n    };\n\n    const signOut = async () => {\n      const signOutBtnElement = document.getElementById('signOutBtn');\n      signOutBtnElement.disabled = true;\n      signOutBtnElement.className = 'text-pink-500';\n      signOutBtnElement.innerText = 'Signing out...';\n      await axios.delete('http://localhost:3000/auth/signout', {\n        withCredentials: true\n      });\n      localStorage.removeItem('username'); // router.push('/auth/signin')\n\n      username.value = '';\n      router.push(\"/auth/signin\");\n    };\n\n    onMounted(async () => {\n      try {\n        const response = await axios.get('http://localhost:3000/users/currentuser', {\n          withCredentials: true\n        });\n        currentUser.value = response.data;\n        username.value = localStorage.getItem('username');\n        console.log(username.value);\n      } catch (error) {\n        if (localStorage.getItem('username')) {\n          localStorage.removeItem('username');\n        }\n      }\n    });\n    const __returned__ = {\n      router,\n      store,\n      username,\n      currentUser,\n      inputSearchUser,\n      dropDownLanguage,\n      toggleDropDown,\n      onBlurToggleDropDown,\n      changeLocale,\n      searchUserEvent,\n      signOut,\n      useStore,\n      useRouter,\n      computed,\n      onMounted,\n      ref,\n      searchUserbyUsername,\n      spin,\n      displayToast,\n      dangerColor,\n      successColor,\n      i18n,\n      axios\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"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","names":["useStore","useRouter","computed","onMounted","ref","searchUserbyUsername","spin","displayToast","dangerColor","successColor","i18n","axios","router","store","username","currentUser","inputSearchUser","dropDownLanguage","toggleDropDown","value","onBlurToggleDropDown","changeLocale","newLocale","locale","searchUserEvent","console","log","searchBtnElement","document","getElementById","tmp","innerHTML","searchUserId","window","location","replace","id","error","signOut","signOutBtnElement","disabled","className","innerText","delete","withCredentials","localStorage","removeItem","push","response","get","data","getItem"],"sources":["E:/LapTrinh/NestJS/social-media-clone/frontend/src/components/NavBar.vue"],"sourcesContent":["<template>\r\n    <nav class=\" w-full\">\r\n      <div v-if=\"currentUser\" class=\" fixed z-[100] w-full drop-shadow-md h-12 bg-white flex justify-around items-center\">\r\n        <div class=\"flex items-center space-x-2 sm:space-x-5 \">\r\n          <router-link to=\"/homepage\" class=\" text-pink-300 hover:text-white \">\r\n            <img src=\"./../assets/instagram.png\" alt=\"\" class=\" w-6 h-6 sm:w-8 sm:h-8 sm:rounded-md\">\r\n          </router-link>\r\n          <div class=\" flex items-center\">\r\n            <input type=\"text\" name=\"q\" :placeholder=\"$t('Search User')\" v-model=\"inputSearchUser\" @keyup.enter=\"searchUserEvent\"\r\n                  class=\" bg-gray-100 border border-gray-200 outline outline-none rounded-md pl-2\">\r\n            <button id=\"searchBtn\" class=\" -translate-x-6\" @click=\"searchUserEvent\"><i class=\"fa-solid fa-magnifying-glass\"></i></button>\r\n          </div>\r\n        </div>\r\n        <div class=\" flex items-center space-x-4\">\r\n          <i class=\"fa-solid fa-house text-lg hidden sm:inline-block\"></i>\r\n          <i class=\"fa-solid fa-heart text-lg hidden sm:inline-block\"></i>\r\n          <div class=\" relative\">\r\n            <div class=\" text-lg hover:text-pink-500\" @blur=\"onBlurToggleDropDown\" @click=\"toggleDropDown\">EN</div>\r\n            <ul v-show=\"!dropDownLanguage\" class=\"absolute bg-white drop-shadow z-[200]\">\r\n              <li class=\"\" @click=\"changeLocale('en')\">English (EN)</li>\r\n              <li class=\"\" @click=\"changeLocale('ja')\">Japanese (JA)</li>\r\n            </ul>\r\n          </div>\r\n          <div class=\" group relative\">\r\n            <img :src=\"require('./../assets/' + currentUser.avatar)\" alt=\"\" class=\" w-6 h-6 rounded-full\">\r\n            <div class=\" hidden hover:flex group-hover:flex flex-col w-36 bg-white drop-shadow z-[200] absolute -right-2 top-8\r\n                        before:absolute before:w-full before:h-5 before:-top-4\">\r\n              <div class=\" flex p-2 hover:bg-gray-100 hover:cursor-pointer\">\r\n                <router-link to=\"/homepage\">\r\n                  <i class=\"fa-solid fa-house mr-3\"></i>{{ $t(\"Navbar/Home page\") }}\r\n                </router-link>\r\n              </div>\r\n              <div class=\" flex p-2 hover:bg-gray-100 hover:cursor-pointer\">\r\n                <router-link :to=\"'/user/' +currentUser.id+ '?currentUserId=' +currentUser.id\">\r\n                  <i class=\"fa-solid fa-user mr-3\"></i>{{ $t(\"Navbar/My page\") }}\r\n                </router-link>\r\n              </div>\r\n              <div class=\" flex p-2 hover:bg-gray-100 hover:cursor-pointer\">\r\n                <router-link to=\"/edit-current-user\">\r\n                  <i class=\"fa-solid fa-gear mr-3\"></i>{{ $t(\"Navbar/Edit user\") }}\r\n                </router-link>\r\n              </div><hr>\r\n              <div id=\"signOutBtn\" @click=\"signOut()\" \r\n                      class=\" text-pink-500 px-2 py-1 hover:text-gray-50 hover:bg-pink-300 cursor-pointer\">\r\n                {{ $t(\"Navbar/Log out\") }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n      </div>\r\n\r\n      <!-- <div v-else class=\" fixed z-[100] w-full drop-shadow-md h-12 bg-white font-semibold flex justify-around items-center\">\r\n        <div class=\"\">\r\n          <p class=\" text-pink-500\">Let sign in ^^</p>\r\n        </div>\r\n        <div class=\"\">\r\n          <router-link to=\"/auth/signup\" class=\" text-pink-500 hover:text-white\">Sign Up</router-link>\r\n          <router-link to=\"/auth/signin\" class=\" text-pink-500 hover:text-white\">Sign In</router-link>\r\n        </div>\r\n      </div> -->\r\n\r\n        \r\n    </nav>\r\n    \r\n</template>\r\n\r\n\r\n<script setup>\r\nimport { useStore } from 'vuex';\r\nimport { useRouter } from \"vue-router\"\r\nimport { computed, onMounted, ref } from 'vue';\r\nimport { searchUserbyUsername, spin } from './../composables/Fetch.js';\r\nimport { displayToast, dangerColor, successColor } from './../composables/DisplayToast.js';\r\nimport { i18n } from './../langs/languages';\r\nimport axios from 'axios';\r\n\r\nconst router = useRouter();\r\nconst store = useStore();\r\n\r\nconst username = ref(null);\r\nconst currentUser = ref(null);\r\n\r\nconst inputSearchUser = ref('');\r\nconst dropDownLanguage = ref(false);\r\n\r\nconst toggleDropDown = () => {\r\n  dropDownLanguage.value = !dropDownLanguage.value;\r\n}\r\n\r\nconst onBlurToggleDropDown = () => {\r\n  dropDownLanguage.value = false;\r\n}\r\n\r\nconst changeLocale = (newLocale) => {\r\n  i18n.locale = newLocale\r\n} \r\n\r\nconst searchUserEvent = async () => {\r\n  console.log('inside search event');\r\n  const searchBtnElement = document.getElementById('searchBtn');\r\n  const tmp = searchBtnElement.innerHTML; \r\n  searchBtnElement.innerHTML = spin('gray');\r\n  try {\r\n    console.log(inputSearchUser.value);\r\n    const searchUserId = await searchUserbyUsername(inputSearchUser.value);\r\n    console.log(searchUserId);\r\n    window.location.replace(`http://localhost:8080/user/${searchUserId}?currentUserId=${currentUser.value.id}`);\r\n    inputSearchUser.value = '';\r\n    searchBtnElement.innerHTML = tmp;\r\n  } catch (error) {\r\n    console.log(error);\r\n    searchBtnElement.innerHTML = tmp;\r\n    displayToast(`User ${inputSearchUser.value} doesn't exist`, dangerColor);\r\n  }\r\n}\r\n\r\nconst signOut = async () => {\r\n  const signOutBtnElement = document.getElementById('signOutBtn');\r\n  signOutBtnElement.disabled = true;\r\n  signOutBtnElement.className = 'text-pink-500';\r\n  signOutBtnElement.innerText =  'Signing out...'\r\n  await axios.delete('http://localhost:3000/auth/signout', {withCredentials: true});\r\n  localStorage.removeItem('username');\r\n  // router.push('/auth/signin')\r\n  username.value = '';\r\n  router.push(\"/auth/signin\");\r\n\r\n}\r\n\r\nonMounted( async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:3000/users/currentuser', {withCredentials: true});\r\n    currentUser.value = response.data;\r\n    username.value = localStorage.getItem('username');\r\n    console.log(username.value);\r\n  } catch (error) {\r\n    if(localStorage.getItem('username')) {\r\n      localStorage.removeItem('username');\r\n    }\r\n  }\r\n\r\n  \r\n})\r\n\r\n\r\n</script>\r\n\r\n"]},"metadata":{},"sourceType":"module"}