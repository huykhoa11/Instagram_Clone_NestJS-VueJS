{"ast":null,"code":"import { useStore } from 'vuex';\nimport { useRouter } from \"vue-router\";\nimport { computed, onMounted, ref } from 'vue';\nimport { searchUserbyUsername, spin } from './../composables/Fetch.js';\nimport axios from 'axios';\nexport default {\n  __name: 'NavBar',\n\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const router = useRouter();\n    const store = useStore();\n    const username = ref(null);\n    const currentUser = ref(null);\n    const inputSearchUser = ref('');\n\n    const searchUserEvent = async () => {\n      const searchBtnElement = document.getElementById('searchBtn');\n      searchBtnElement.innerHTML = spin('gray');\n      const searchUserId = await searchUserbyUsername(inputSearchUser.value);\n      window.location.replace(`http://localhost:8080/user/${searchUserId}?currentUserId=${currentUser.value.id}`);\n    };\n\n    const signOut = async () => {\n      const signOutBtnElement = document.getElementById('signOutBtn');\n      signOutBtnElement.disabled = true;\n      signOutBtnElement.className = 'text-pink-500';\n      signOutBtnElement.innerText = 'Signing out...';\n      await axios.delete('http://localhost:3000/auth/signout', {\n        withCredentials: true\n      });\n      localStorage.removeItem('username'); // router.push('/auth/signin')\n\n      username.value = '';\n      window.location.replace(\"http://localhost:8080/auth/signin\");\n    };\n\n    onMounted(async () => {\n      try {\n        const response = await axios.get('http://localhost:3000/users/currentuser', {\n          withCredentials: true\n        });\n        currentUser.value = response.data;\n        username.value = localStorage.getItem('username');\n        console.log(username.value);\n      } catch (error) {\n        if (localStorage.getItem('username')) {\n          localStorage.removeItem('username');\n        }\n      }\n    });\n    const __returned__ = {\n      router,\n      store,\n      username,\n      currentUser,\n      inputSearchUser,\n      searchUserEvent,\n      signOut,\n      useStore,\n      useRouter,\n      computed,\n      onMounted,\n      ref,\n      searchUserbyUsername,\n      spin,\n      axios\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AAyDA,SAASA,QAAT,QAAyB,MAAzB;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,GAA9B,QAAyC,KAAzC;AACA,SAASC,oBAAT,EAA+BC,IAA/B,QAA2C,2BAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;;;;;;IAEA,MAAMC,MAAM,GAAGP,SAAS,EAAxB;IACA,MAAMQ,KAAK,GAAGT,QAAQ,EAAtB;IAEA,MAAMU,QAAQ,GAAGN,GAAG,CAAC,IAAD,CAApB;IACA,MAAMO,WAAW,GAAGP,GAAG,CAAC,IAAD,CAAvB;IAEA,MAAMQ,eAAe,GAAGR,GAAG,CAAC,EAAD,CAA3B;;IAEA,MAAMS,eAAe,GAAG,YAAY;MAClC,MAAMC,gBAAgB,GAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAzB;MACAF,gBAAgB,CAACG,SAAjB,GAA6BX,IAAI,CAAC,MAAD,CAAjC;MACA,MAAMY,YAAY,GAAG,MAAMb,oBAAoB,CAACO,eAAe,CAACO,KAAjB,CAA/C;MACAC,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAyB,8BAA6BJ,YAAa,kBAAiBP,WAAW,CAACQ,KAAZ,CAAkBI,EAAG,EAAzG;IACD,CALD;;IAOA,MAAMC,OAAO,GAAG,YAAY;MAC1B,MAAMC,iBAAiB,GAAGV,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAA1B;MACAS,iBAAiB,CAACC,QAAlB,GAA6B,IAA7B;MACAD,iBAAiB,CAACE,SAAlB,GAA8B,eAA9B;MACAF,iBAAiB,CAACG,SAAlB,GAA+B,gBAA/B;MACA,MAAMrB,KAAK,CAACsB,MAAN,CAAa,oCAAb,EAAmD;QAACC,eAAe,EAAE;MAAlB,CAAnD,CAAN;MACAC,YAAY,CAACC,UAAb,CAAwB,UAAxB,EAN0B,CAO1B;;MACAtB,QAAQ,CAACS,KAAT,GAAiB,EAAjB;MACAC,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,mCAAxB;IAED,CAXD;;IAaAnB,SAAS,CAAE,YAAY;MACrB,IAAI;QACF,MAAM8B,QAAQ,GAAG,MAAM1B,KAAK,CAAC2B,GAAN,CAAU,yCAAV,EAAqD;UAACJ,eAAe,EAAE;QAAlB,CAArD,CAAvB;QACAnB,WAAW,CAACQ,KAAZ,GAAoBc,QAAQ,CAACE,IAA7B;QACAzB,QAAQ,CAACS,KAAT,GAAiBY,YAAY,CAACK,OAAb,CAAqB,UAArB,CAAjB;QACAC,OAAO,CAACC,GAAR,CAAY5B,QAAQ,CAACS,KAArB;MACD,CALD,CAKE,OAAOoB,KAAP,EAAc;QACd,IAAGR,YAAY,CAACK,OAAb,CAAqB,UAArB,CAAH,EAAqC;UACnCL,YAAY,CAACC,UAAb,CAAwB,UAAxB;QACD;MACF;IAGF,CAbQ,CAAT","names":["useStore","useRouter","computed","onMounted","ref","searchUserbyUsername","spin","axios","router","store","username","currentUser","inputSearchUser","searchUserEvent","searchBtnElement","document","getElementById","innerHTML","searchUserId","value","window","location","replace","id","signOut","signOutBtnElement","disabled","className","innerText","delete","withCredentials","localStorage","removeItem","response","get","data","getItem","console","log","error"],"sources":["E:/LapTrinh/NestJS/social-media-clone/frontend/src/components/NavBar.vue"],"sourcesContent":["<template>\r\n    <nav class=\"\">\r\n      <div v-if=\"currentUser\" class=\" fixed z-[100] w-full drop-shadow-md h-12 bg-white flex justify-around items-center\">\r\n        <div class=\"flex items-center space-x-5\">\r\n          <router-link to=\"/homepage\" class=\" text-pink-300 hover:text-white\">\r\n            <img src=\"./../assets/instagram.png\" alt=\"\" class=\" w-8 h-8\">\r\n          </router-link>\r\n          <div class=\"\">\r\n            <input type=\"search\" name=\"q\" placeholder=\"Search User\" v-model=\"inputSearchUser\"\r\n                  class=\" bg-gray-100 border border-gray-200 outline outline-none rounded-md pl-2\">\r\n            <button id=\"searchBtn\" class=\" \" @click=\"searchUserEvent\"><i class=\"fa-solid fa-magnifying-glass\"></i></button>\r\n          </div>\r\n        </div>\r\n        <div class=\" flex items-center space-x-4\">\r\n          <i class=\"fa-solid fa-house text-lg\"></i>\r\n          <i class=\"fa-regular fa-heart text-lg\"></i>\r\n          <div class=\" group relative\">\r\n            <img :src=\"require('./../assets/' + currentUser.avatar)\" alt=\"\" class=\" w-6 h-6 rounded-full\">\r\n            <div class=\" hidden hover:flex group-hover:flex flex-col w-36 bg-white drop-shadow z-[200] absolute -right-2 top-8\r\n                        before:absolute before:w-full before:h-5 before:-top-4\">\r\n              <div class=\" flex p-2 hover:bg-gray-100 hover:cursor-pointer\">\r\n                <router-link :to=\"'/user/' +currentUser.id+ '?currentUserId=' +currentUser.id\">\r\n                  <i class=\"fa-regular fa-user mr-3\"></i>My Page\r\n                </router-link>\r\n              </div>\r\n              <div class=\" flex p-2 hover:bg-gray-100 hover:cursor-pointer\">\r\n                <router-link to=\"/edit-current-user\">\r\n                  <i class=\"fa-solid fa-gear mr-3\"></i>Edit user\r\n                </router-link>\r\n              </div><hr>\r\n              <div id=\"signOutBtn\" @click=\"signOut()\" \r\n                      class=\" text-pink-500 px-2 py-1 hover:text-gray-50 hover:bg-pink-300 cursor-pointer\">\r\n                Sign Out\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n      </div>\r\n\r\n      <!-- <div v-else class=\" fixed z-[100] w-full drop-shadow-md h-12 bg-white font-semibold flex justify-around items-center\">\r\n        <div class=\"\">\r\n          <p class=\" text-pink-500\">Let sign in ^^</p>\r\n        </div>\r\n        <div class=\"\">\r\n          <router-link to=\"/auth/signup\" class=\" text-pink-500 hover:text-white\">Sign Up</router-link>\r\n          <router-link to=\"/auth/signin\" class=\" text-pink-500 hover:text-white\">Sign In</router-link>\r\n        </div>\r\n      </div> -->\r\n\r\n        \r\n    </nav>\r\n    \r\n</template>\r\n\r\n\r\n<script setup>\r\nimport { useStore } from 'vuex';\r\nimport { useRouter } from \"vue-router\"\r\nimport { computed, onMounted, ref } from 'vue';\r\nimport { searchUserbyUsername, spin } from './../composables/Fetch.js';\r\nimport axios from 'axios';\r\n\r\nconst router = useRouter();\r\nconst store = useStore();\r\n\r\nconst username = ref(null);\r\nconst currentUser = ref(null);\r\n\r\nconst inputSearchUser = ref('');\r\n\r\nconst searchUserEvent = async () => {\r\n  const searchBtnElement = document.getElementById('searchBtn');\r\n  searchBtnElement.innerHTML = spin('gray');\r\n  const searchUserId = await searchUserbyUsername(inputSearchUser.value);\r\n  window.location.replace(`http://localhost:8080/user/${searchUserId}?currentUserId=${currentUser.value.id}`);\r\n}\r\n\r\nconst signOut = async () => {\r\n  const signOutBtnElement = document.getElementById('signOutBtn');\r\n  signOutBtnElement.disabled = true;\r\n  signOutBtnElement.className = 'text-pink-500';\r\n  signOutBtnElement.innerText =  'Signing out...'\r\n  await axios.delete('http://localhost:3000/auth/signout', {withCredentials: true});\r\n  localStorage.removeItem('username');\r\n  // router.push('/auth/signin')\r\n  username.value = '';\r\n  window.location.replace(\"http://localhost:8080/auth/signin\");\r\n\r\n}\r\n\r\nonMounted( async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:3000/users/currentuser', {withCredentials: true});\r\n    currentUser.value = response.data;\r\n    username.value = localStorage.getItem('username');\r\n    console.log(username.value);\r\n  } catch (error) {\r\n    if(localStorage.getItem('username')) {\r\n      localStorage.removeItem('username');\r\n    }\r\n  }\r\n\r\n  \r\n})\r\n\r\n\r\n</script>\r\n\r\n"]},"metadata":{},"sourceType":"module"}