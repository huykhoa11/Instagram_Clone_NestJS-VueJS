{"ast":null,"code":"import { onMounted, ref } from 'vue';\nimport axios from \"axios\";\nimport { displayToast, dangerColor, successColor } from './../../composables/DisplayToast.js';\nexport default {\n  __name: 'EditPassword',\n\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const currentUser = ref(null);\n    const oldPassword = ref('');\n    const newPassword = ref('');\n    const confirmNewPassword = ref('');\n\n    const update = async () => {\n      if (newPassword.value === confirmNewPassword.value) {\n        const data = {\n          password: newPassword.value\n        };\n\n        try {\n          const response = await axios.patch(`http://localhost:3000/users/edit-password/${currentUser.value.id}`, data, {\n            headers: {\n              Accept: \"application/json\",\n              \"Content-Type\": \"application/json;charset=UTF-8\"\n            },\n            withCredentials: true\n          });\n\n          if (response.data) {\n            displayToast('Save new password successfully', successColor);\n            oldPassword.value = '';\n            newPassword.value = '';\n            confirmNewPassword.value = '';\n          }\n        } catch (error) {\n          displayToast('Wrong input current password', dangerColor);\n        }\n      } else {\n        displayToast('Confirm password entry is not match', dangerColor);\n      }\n    };\n\n    onMounted(async () => {\n      try {\n        const response = await axios.get('http://localhost:3000/users/currentuser', {\n          withCredentials: true\n        });\n        console.log(response.data);\n        currentUser.value = response.data;\n        console.log(currentUser.value);\n      } catch (error) {\n        console.log(error);\n      }\n    });\n    const __returned__ = {\n      currentUser,\n      oldPassword,\n      newPassword,\n      confirmNewPassword,\n      update,\n      onMounted,\n      ref,\n      axios,\n      displayToast,\n      dangerColor,\n      successColor\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AAgCA,SAASA,SAAT,EAAoBC,GAApB,QAA+B,KAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,EAAuBC,WAAvB,EAAoCC,YAApC,QAAwD,qCAAxD;;;;;;;;IAEA,MAAMC,WAAW,GAAGL,GAAG,CAAC,IAAD,CAAvB;IAEA,MAAMM,WAAW,GAAGN,GAAG,CAAC,EAAD,CAAvB;IACA,MAAMO,WAAW,GAAGP,GAAG,CAAC,EAAD,CAAvB;IACA,MAAMQ,kBAAkB,GAAGR,GAAG,CAAC,EAAD,CAA9B;;IAEA,MAAMS,MAAM,GAAG,YAAY;MACvB,IAAGF,WAAW,CAACG,KAAZ,KAAsBF,kBAAkB,CAACE,KAA5C,EAAmD;QAC/C,MAAMC,IAAI,GAAG;UAACC,QAAQ,EAAEL,WAAW,CAACG;QAAvB,CAAb;;QACA,IAAI;UACA,MAAMG,QAAQ,GAAG,MAAMZ,KAAK,CACvBa,KADkB,CACX,6CAA4CT,WAAW,CAACK,KAAZ,CAAkBK,EAAG,EADtD,EACyDJ,IADzD,EAC+D;YAC9EK,OAAO,EAAE;cACLC,MAAM,EAAE,kBADH;cAEL,gBAAgB;YAFX,CADqE;YAK9EC,eAAe,EAAE;UAL6D,CAD/D,CAAvB;;UAQA,IAAGL,QAAQ,CAACF,IAAZ,EAAkB;YACdT,YAAY,CAAC,gCAAD,EAAmCE,YAAnC,CAAZ;YACAE,WAAW,CAACI,KAAZ,GAAoB,EAApB;YACAH,WAAW,CAACG,KAAZ,GAAoB,EAApB;YACAF,kBAAkB,CAACE,KAAnB,GAA2B,EAA3B;UACH;QACJ,CAfD,CAeE,OAAOS,KAAP,EAAc;UACZjB,YAAY,CAAC,8BAAD,EAAiCC,WAAjC,CAAZ;QACH;MACJ,CApBD,MAqBK;QACDD,YAAY,CAAC,qCAAD,EAAwCC,WAAxC,CAAZ;MACH;IAGJ,CA3BD;;IA6BAJ,SAAS,CAAE,YAAW;MAClB,IAAI;QACA,MAAMc,QAAQ,GAAG,MAAMZ,KAAK,CAACmB,GAAN,CAAU,yCAAV,EAAqD;UAACF,eAAe,EAAE;QAAlB,CAArD,CAAvB;QACAG,OAAO,CAACC,GAAR,CAAYT,QAAQ,CAACF,IAArB;QACAN,WAAW,CAACK,KAAZ,GAAoBG,QAAQ,CAACF,IAA7B;QACAU,OAAO,CAACC,GAAR,CAAYjB,WAAW,CAACK,KAAxB;MACH,CALD,CAKE,OAAOS,KAAP,EAAc;QACZE,OAAO,CAACC,GAAR,CAAYH,KAAZ;MACH;IACJ,CATQ,CAAT","names":["onMounted","ref","axios","displayToast","dangerColor","successColor","currentUser","oldPassword","newPassword","confirmNewPassword","update","value","data","password","response","patch","id","headers","Accept","withCredentials","error","get","console","log"],"sources":["E:/LapTrinh/NestJS/social-media-clone/frontend/src/components/EditUser/EditPassword.vue"],"sourcesContent":["<template>\r\n    <section>\r\n        <div v-if=\"currentUser\" class=\" space-y-4 py-5\">\r\n            <div class=\" flex items-center space-x-5 ml-16\">\r\n                <img :src=\"require('./../../assets/' + currentUser.avatar)\" alt=\"\" class=\" h-10 w-10 md:h-14 md:w rounded-full\">\r\n                <p class=\" text-lg font-semibold\">{{ currentUser.username }}</p>\r\n            </div>\r\n\r\n            <div class=\" flex flex-col ml-3 h-12 md:flex-row md:items-center lg:h-9\">\r\n                <div class=\" \">Old password</div>\r\n                <input type=\"password\" v-model=\"oldPassword\" class=\" h-full pl-2 border-2 border-gray-200 flex-1 outline-none shadow-sm shadow-gray-500/50\">\r\n            </div>\r\n\r\n            <div class=\" flex flex-col ml-3 h-12 md:flex-row md:items-center lg:h-9\">\r\n                <div class=\" \">New password</div>\r\n                <input type=\"password\" v-model=\"newPassword\" class=\" h-full pl-2 border-2 border-gray-200 flex-1 outline-none shadow-sm shadow-gray-500/50\">\r\n            </div>\r\n\r\n            <div class=\" flex flex-col md:flex-row md:items-center h-9\">\r\n                <div class=\" \">Password Confirmation</div>\r\n                <input type=\"password\" v-model=\"confirmNewPassword\" class=\" h-full pl-2 border-2 border-gray-200 flex-1 outline-none shadow-sm shadow-gray-500/50\">\r\n            </div>\r\n\r\n            <button class=\" ml-3 px-2 py-1 text-white hover:bg-blue-400 rounded-sm\r\n                            bg-blue-500 shadow-lg shadow-blue-500/50\" @click=\"update\">\r\n                            Update\r\n            </button>\r\n        </div>\r\n    </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref } from 'vue';\r\nimport axios from \"axios\";\r\nimport { displayToast, dangerColor, successColor } from './../../composables/DisplayToast.js';\r\n\r\nconst currentUser = ref(null);\r\n\r\nconst oldPassword = ref('');\r\nconst newPassword = ref('');\r\nconst confirmNewPassword = ref('');\r\n\r\nconst update = async () => {\r\n    if(newPassword.value === confirmNewPassword.value) {\r\n        const data = {password: newPassword.value};\r\n        try {\r\n            const response = await axios\r\n                .patch(`http://localhost:3000/users/edit-password/${currentUser.value.id}`, data, {\r\n                    headers: {\r\n                        Accept: \"application/json\",\r\n                        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n                    },\r\n                    withCredentials: true,\r\n                });\r\n            if(response.data) {\r\n                displayToast('Save new password successfully', successColor);\r\n                oldPassword.value = '';\r\n                newPassword.value = '';\r\n                confirmNewPassword.value = '';\r\n            }\r\n        } catch (error) {\r\n            displayToast('Wrong input current password', dangerColor);\r\n        }\r\n    }\r\n    else {\r\n        displayToast('Confirm password entry is not match', dangerColor)\r\n    }\r\n\r\n    \r\n}\r\n\r\nonMounted( async() => {\r\n    try {\r\n        const response = await axios.get('http://localhost:3000/users/currentuser', {withCredentials: true});\r\n        console.log(response.data);\r\n        currentUser.value = response.data;\r\n        console.log(currentUser.value);\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n})\r\n</script>"]},"metadata":{},"sourceType":"module"}