{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"relative w-full h-screen bg-gray-200\"\n};\nconst _hoisted_2 = {\n  class: \"absolute left-0 right-0 top-20 mx-auto w-5/6 sm:w-[500px] rounded-lg bg-white overflow-hidden\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"header\", {\n  class: \"w-full h-20 pl-10 flex items-center bg-gradient-to-r from-fuchsia-600 to-pink-400 font-bold text-white text-4xl\"\n}, \"Sign Up\", -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = {\n  class: \"p-5 sm:p-10\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"\",\n  class: \"text-md sm:text-lg block\"\n}, [/*#__PURE__*/_createTextVNode(\"Username\"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"text-red-500\"\n}, \"*\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"text-xs text-gray-400\"\n}, \"(*) Username can't contain white space\", -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  class: \"text-sm sm:text-md sm:h-4 text-red-500\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"\",\n  class: \"text-md sm:text-lg block\"\n}, [/*#__PURE__*/_createTextVNode(\"Password\"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"text-red-500\"\n}, \"*\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_10 = {\n  class: \"text-sm sm:text-md sm:h-4 text-red-500\"\n};\n\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"\",\n  class: \"text-md sm:text-lg block\"\n}, [/*#__PURE__*/_createTextVNode(\"Confirm Password\"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"text-red-500\"\n}, \"*\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_13 = {\n  class: \"text-sm sm:text-md sm:h-4 text-red-500\"\n};\n\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  return _openBlock(), _createElementBlock(\"section\", null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n    id: \"usernameInput\",\n    type: \"text\",\n    spaceholfer: \"\",\n    class: \"border border-gray-200 h-10 w-full pl-2 rounded-md drop-shadow-sm outline outline-none\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.username = $event),\n    onBlur: _cache[1] || (_cache[1] = $event => $setup.validateOnBlur()),\n    onFocus: _cache[2] || (_cache[2] = $event => $setup.inputFocus('usernameInput')),\n    onInput: $setup.inputChange\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, $setup.username]]), _hoisted_6, _createElementVNode(\"p\", _hoisted_7, _toDisplayString($setup.usernameError), 1\n  /* TEXT */\n  ), _hoisted_8, _hoisted_9, _withDirectives(_createElementVNode(\"input\", {\n    id: \"passwordInput\",\n    type: \"password\",\n    class: \"border border-gray-200 h-10 w-full pl-2 rounded-md drop-shadow-sm outline outline-none\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.password = $event),\n    onBlur: _cache[4] || (_cache[4] = $event => $setup.validateOnBlur()),\n    onFocus: _cache[5] || (_cache[5] = $event => $setup.inputFocus('passwordInput')),\n    onInput: $setup.inputChange\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, $setup.password]]), _createElementVNode(\"p\", _hoisted_10, _toDisplayString($setup.passwordError), 1\n  /* TEXT */\n  ), _hoisted_11, _hoisted_12, _withDirectives(_createElementVNode(\"input\", {\n    id: \"confirmPasswordInput\",\n    type: \"password\",\n    class: \"border border-gray-200 h-10 w-full pl-2 rounded-md drop-shadow-sm outline outline-none\",\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.confirmPassword = $event),\n    onBlur: _cache[7] || (_cache[7] = $event => $setup.validateOnBlur()),\n    onFocus: _cache[8] || (_cache[8] = $event => $setup.inputFocus('confirmPasswordInput')),\n    onInput: $setup.inputChange\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, $setup.confirmPassword]]), _createElementVNode(\"p\", _hoisted_13, _toDisplayString($setup.confirmPasswordError), 1\n  /* TEXT */\n  ), _hoisted_14, _createElementVNode(\"div\", null, [_createVNode(_component_router_link, {\n    to: \"/auth/signin\",\n    class: \"text-xs sm:text-sm text-sky-500 hover:underline hover:decoration-solid\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\" Already have an account? Sign in \")]),\n    _: 1\n    /* STABLE */\n\n  })]), _createElementVNode(\"button\", {\n    onClick: _cache[9] || (_cache[9] = $event => $setup.signUp()),\n    class: \"mt-3 sm:mt-7 py-1 px-3 bg-black rounded-md text-md sm:text-xl text-white hover:bg-gray-500\",\n    ref: \"signUpRef\"\n  }, \"User register\", 512\n  /* NEED_PATCH */\n  )])])])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","for","_createElementBlock","_hoisted_3","_hoisted_5","id","type","spaceholfer","$setup","$event","onBlur","onFocus","onInput","_hoisted_6","_toDisplayString","_hoisted_8","_hoisted_9","_hoisted_11","_hoisted_12","_hoisted_14","_createVNode","_component_router_link","to","onClick","ref"],"sourceRoot":"","sources":["E:\\LapTrinh\\NestJS\\social-media-clone\\frontend\\src\\components\\auth\\SignUp.vue"],"sourcesContent":["<template>\r\n  <section>\r\n    <div class=\" relative w-full h-screen bg-gray-200 \">\r\n      <div class=\" absolute left-0 right-0 top-20 mx-auto w-5/6 sm:w-[500px] rounded-lg bg-white overflow-hidden\">\r\n        <header class=\" w-full h-20 pl-10 flex items-center bg-gradient-to-r from-fuchsia-600 to-pink-400 font-bold text-white text-4xl\">Sign Up</header>\r\n        \r\n        <div class=\" p-5 sm:p-10\">\r\n          <label for=\"\" class=\" text-md sm:text-lg block\">Username<span class=\"text-red-500\">*</span></label>\r\n          <input id=\"usernameInput\" type=\"text\" spaceholfer=\"\"\r\n                            class=\"border border-gray-200 h-10 w-full pl-2 rounded-md drop-shadow-sm outline outline-none\" \r\n                            v-model=\"username\" @blur=\"validateOnBlur()\" @focus=\"inputFocus('usernameInput')\" @input=\"inputChange\">\r\n          <p class=\" text-xs text-gray-400\">(*) Username can't contain white space</p>\r\n          <p class=\" text-sm sm:text-md sm:h-4 text-red-500\">{{ usernameError }}</p>\r\n          <br>\r\n\r\n          <label for=\"\" class=\" text-md sm:text-lg block\">Password<span class=\"text-red-500\">*</span></label>\r\n          <input id=\"passwordInput\" type=\"password\" class=\"border border-gray-200 h-10 w-full pl-2 rounded-md drop-shadow-sm outline outline-none\" \r\n                            v-model=\"password\" @blur=\"validateOnBlur()\" @focus=\"inputFocus('passwordInput')\" @input=\"inputChange\">\r\n          <p class=\" text-sm sm:text-md sm:h-4 text-red-500\">{{ passwordError }}</p>\r\n          <br>\r\n\r\n          <label for=\"\" class=\" text-md sm:text-lg block\">Confirm Password<span class=\"text-red-500\">*</span></label>\r\n          <input id=\"confirmPasswordInput\" type=\"password\" class=\"border border-gray-200 h-10 w-full pl-2 rounded-md drop-shadow-sm outline outline-none\" \r\n                                v-model=\"confirmPassword\" @blur=\"validateOnBlur()\" @focus=\"inputFocus('confirmPasswordInput')\" @input=\"inputChange\">\r\n          <p class=\" text-sm sm:text-md sm:h-4 text-red-500\">{{ confirmPasswordError }}</p>\r\n          <br>\r\n          <div>\r\n            <router-link to=\"/auth/signin\" class=\" text-xs sm:text-sm text-sky-500 hover:underline hover:decoration-solid\">\r\n              Already have an account? Sign in \r\n            </router-link>\r\n          </div>\r\n\r\n          <button @click=\"signUp()\" class=\" mt-3 sm:mt-7 py-1 px-3 bg-black rounded-md \r\n                                      text-md sm:text-xl text-white hover:bg-gray-500\" ref=\"signUpRef\">User register</button>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n  </section>\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\nimport {useRouter} from \"vue-router\"\r\nimport {useStore} from \"vuex\"\r\nimport { register, spin } from '/src/composables/Fetch.js';\r\n\r\nconst store = useStore();\r\n\r\nconst username = ref('');\r\nconst password = ref('');\r\nconst confirmPassword = ref('');\r\nconst usernameError = ref('');\r\nconst passwordError = ref('');\r\nconst confirmPasswordError = ref('');\r\n\r\nconst signUpRef = ref(null);\r\n\r\nconst router = useRouter();\r\n\r\nconst inputChange = () => {\r\n  if(username.value.length >= 4 && username.value.length <= 12) {\r\n    usernameError.value = '';\r\n  }\r\n  if(password.value.length >= 6 && password.value.length <= 12) {\r\n    passwordError.value = '';\r\n  }\r\n  if(confirmPassword.value.length > 0) {\r\n    confirmPasswordError.value = '';\r\n  }\r\n}\r\n\r\n\r\nconst inputFocus = (id) => {\r\n  const inputElement = document.getElementById(id);\r\n  inputElement.style.border = 'solid 1px black';\r\n}\r\n\r\nconst validateOnBlur = () => {\r\n  // const usernameInputElement = document.getElementById('usernameInput');\r\n  // const passwordInputElement = document.getElementById('passwordInput');\r\n  // const confirmPasswordInputElement = document.getElementById('confirmPasswordInput');\r\n\r\n  const usernameConditionBlank = username.value.length < 4 || password.value.length > 12;\r\n  const usernameConditionContainWhiteSpace = /\\s/.test(username.value);\r\n  const passwordCondition = password.value.length < 6 || password.value.length > 12;\r\n  const confirmCondition  = confirmPassword.value === '' || confirmPassword.value !== password.value;  \r\n\r\n  if (usernameConditionBlank && passwordCondition && confirmCondition) {\r\n    setError('username', \"Username can't be blank\");\r\n    setError('password', \"Password must contains 6-12 characters\");\r\n    setError('confirmPassword', \"Must match the previous entry\");\r\n    return false;\r\n  }\r\n  else if (usernameConditionContainWhiteSpace) {\r\n    setError('username', \"Username can't contain white space\");\r\n    return false;\r\n  }\r\n  else if(usernameConditionBlank) {\r\n    setError('username', \"Username can't be blank\");\r\n    return false;\r\n  }\r\n  if(passwordCondition) {\r\n    setError('password', \"Password must contains 6-12 characters\");\r\n    return false;\r\n  }\r\n  if(confirmCondition) {\r\n    setError('confirmPassword', \"Must match the previous entry\");\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\nconst errorElement = {\r\n  username: usernameError,\r\n  password: passwordError,\r\n  confirmPassword: confirmPasswordError,\r\n}\r\n\r\nconst setError = (ele, text) => {\r\n  document.getElementById(`${ele}Input`).style.border = \"solid 1px red\";\r\n  errorElement[ele].value = text;\r\n}\r\n\r\nconst signUp = async () => {\r\n  const validate = validateOnBlur();\r\n  console.log('validateOnBlur', validate);\r\n  if(validate === true) {\r\n    const data = {\r\n      username: username.value,\r\n      password: password.value,\r\n    };\r\n    try {\r\n      signUpRef.value.disabled = true;\r\n      signUpRef.value.classList.toggle('hover:bg-gray-500');\r\n      signUpRef.value.innerText = spin('pink');\r\n      const response = await register(data);\r\n      \r\n      router.push('/auth/signin')\r\n    } catch (error) {\r\n      console.log(error);\r\n      if (error.response.status === 409) {\r\n        signUpRef.value.disabled = false;\r\n        signUpRef.value.classList.toggle('hover:bg-gray-500');\r\n        signUpRef.value.innerText = 'User register';\r\n\r\n        // const usernameInputElement = document.getElementById('usernameInput');\r\n        // usernameInputElement.style.border = \"solid 1px red\";\r\n        // usernameError.value = \"Sorry, username already taken\";\r\n        setError('username', \"Sorry, username already taken\")\r\n      }\r\n    } \r\n  }\r\n\r\n};\r\n\r\n</script>"]},"metadata":{},"sourceType":"module"}