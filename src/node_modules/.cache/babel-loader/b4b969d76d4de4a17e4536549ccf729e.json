{"ast":null,"code":"import { Observable } from '../Observable';\nimport { argsArgArrayOrObject } from '../util/argsArgArrayOrObject';\nimport { innerFrom } from './innerFrom';\nimport { popResultSelector } from '../util/args';\nimport { createOperatorSubscriber } from '../operators/OperatorSubscriber';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\nimport { createObject } from '../util/createObject';\nexport function forkJoin() {\n  var args = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n\n  var resultSelector = popResultSelector(args);\n\n  var _a = argsArgArrayOrObject(args),\n      sources = _a.args,\n      keys = _a.keys;\n\n  var result = new Observable(function (subscriber) {\n    var length = sources.length;\n\n    if (!length) {\n      subscriber.complete();\n      return;\n    }\n\n    var values = new Array(length);\n    var remainingCompletions = length;\n    var remainingEmissions = length;\n\n    var _loop_1 = function (sourceIndex) {\n      var hasValue = false;\n      innerFrom(sources[sourceIndex]).subscribe(createOperatorSubscriber(subscriber, function (value) {\n        if (!hasValue) {\n          hasValue = true;\n          remainingEmissions--;\n        }\n\n        values[sourceIndex] = value;\n      }, function () {\n        return remainingCompletions--;\n      }, undefined, function () {\n        if (!remainingCompletions || !hasValue) {\n          if (!remainingEmissions) {\n            subscriber.next(keys ? createObject(keys, values) : values);\n          }\n\n          subscriber.complete();\n        }\n      }));\n    };\n\n    for (var sourceIndex = 0; sourceIndex < length; sourceIndex++) {\n      _loop_1(sourceIndex);\n    }\n  });\n  return resultSelector ? result.pipe(mapOneOrManyArgs(resultSelector)) : result;\n}","map":{"version":3,"mappings":"AAAA,SAASA,UAAT,QAA2B,eAA3B;AAEA,SAASC,oBAAT,QAAqC,8BAArC;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,iBAAT,QAAkC,cAAlC;AACA,SAASC,wBAAT,QAAyC,iCAAzC;AACA,SAASC,gBAAT,QAAiC,0BAAjC;AACA,SAASC,YAAT,QAA6B,sBAA7B;AA2IA,OAAM,SAAUC,QAAV,GAAkB;EAAC;;OAAA,yCAAc;IAAdC;;;EACvB,IAAMC,cAAc,GAAGN,iBAAiB,CAACK,IAAD,CAAxC;;EACM,SAA0BP,oBAAoB,CAACO,IAAD,CAA9C;EAAA,IAAQE,OAAO,UAAf;EAAA,IAAiBC,IAAI,UAArB;;EACN,IAAMC,MAAM,GAAG,IAAIZ,UAAJ,CAAe,UAACa,UAAD,EAAW;IAC/B,UAAM,GAAKH,OAAO,OAAlB;;IACR,IAAI,CAACI,MAAL,EAAa;MACXD,UAAU,CAACE,QAAX;MACA;IACD;;IACD,IAAMC,MAAM,GAAG,IAAIC,KAAJ,CAAUH,MAAV,CAAf;IACA,IAAII,oBAAoB,GAAGJ,MAA3B;IACA,IAAIK,kBAAkB,GAAGL,MAAzB;;4BACSM,aAAW;MAClB,IAAIC,QAAQ,GAAG,KAAf;MACAnB,SAAS,CAACQ,OAAO,CAACU,WAAD,CAAR,CAAT,CAAgCE,SAAhC,CACElB,wBAAwB,CACtBS,UADsB,EAEtB,UAACU,KAAD,EAAM;QACJ,IAAI,CAACF,QAAL,EAAe;UACbA,QAAQ,GAAG,IAAX;UACAF,kBAAkB;QACnB;;QACDH,MAAM,CAACI,WAAD,CAAN,GAAsBG,KAAtB;MACD,CARqB,EAStB;QAAM,2BAAoB,EAApB;MAAsB,CATN,EAUtBC,SAVsB,EAWtB;QACE,IAAI,CAACN,oBAAD,IAAyB,CAACG,QAA9B,EAAwC;UACtC,IAAI,CAACF,kBAAL,EAAyB;YACvBN,UAAU,CAACY,IAAX,CAAgBd,IAAI,GAAGL,YAAY,CAACK,IAAD,EAAOK,MAAP,CAAf,GAAgCA,MAApD;UACD;;UACDH,UAAU,CAACE,QAAX;QACD;MACF,CAlBqB,CAD1B;;;IAFF,KAAK,IAAIK,WAAW,GAAG,CAAvB,EAA0BA,WAAW,GAAGN,MAAxC,EAAgDM,WAAW,EAA3D,EAA6D;cAApDA;IAwBR;EACF,CAlCc,CAAf;EAmCA,OAAOX,cAAc,GAAGG,MAAM,CAACc,IAAP,CAAYrB,gBAAgB,CAACI,cAAD,CAA5B,CAAH,GAAmDG,MAAxE;AACD","names":["Observable","argsArgArrayOrObject","innerFrom","popResultSelector","createOperatorSubscriber","mapOneOrManyArgs","createObject","forkJoin","args","resultSelector","sources","keys","result","subscriber","length","complete","values","Array","remainingCompletions","remainingEmissions","sourceIndex","hasValue","subscribe","value","undefined","next","pipe"],"sourceRoot":"","sources":["../../../../src/internal/observable/forkJoin.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}