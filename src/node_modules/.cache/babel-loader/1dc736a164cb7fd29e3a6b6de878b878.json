{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport axios from 'axios';\nimport { useRouter } from \"vue-router\";\nimport { useStore } from \"vuex\";\nexport default {\n  __name: 'SignUp',\n\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const store = useStore();\n    const username = ref('');\n    const password = ref('');\n    const confirmPassword = ref('');\n    const usernameError = ref('');\n    const passwordError = ref('');\n    const confirmPasswordError = ref('');\n    const signUpRef = ref(null);\n    const router = useRouter();\n\n    const inputChange = () => {\n      if (username.value.length >= 4 && username.value.length <= 12) {\n        usernameError.value = '';\n      }\n\n      if (password.value.length >= 6 && password.value.length <= 12) {\n        passwordError.value = '';\n      }\n\n      if (confirmPassword.value.length > 0) {\n        confirmPasswordError.value = '';\n      }\n    };\n\n    const inputFocus = id => {\n      const inputElement = document.getElementById(id);\n      inputElement.style.border = 'solid 1px black';\n    };\n\n    const validateOnBlur = () => {\n      const usernameInputElement = document.getElementById('usernameInput');\n      const passwordInputElement = document.getElementById('passwordInput');\n      const confirmPasswordInputElement = document.getElementById('confirmPasswordInput');\n      const usernameConditionBlank = username.valuelength < 4 || password.value.length > 12;\n      const usernameConditionContainWhiteSpace = /\\s/.test(username.value);\n      const passwordCondition = password.value.length < 6 || password.value.length > 12;\n      const confirmCondition = confirmPassword.value === '' || confirmPassword.value !== password.value;\n\n      if (usernameConditionBlank && passwordCondition && confirmCondition) {\n        setError('username', \"Username can't be blank\");\n        setError('password', \"Password must contains 6-12 characters\");\n        setError('confirmPassword', \"Must match the previous entry\");\n        return false;\n      } else if (usernameConditionContainWhiteSpace) {\n        setError('username', \"Username can't contain white space\");\n        return false;\n      } else if (usernameConditionBlank) {\n        setError('username', \"Username can't be blank\");\n        return false;\n      }\n\n      if (passwordCondition) {\n        setError('password', \"Password must contains 6-12 characters\");\n        return false;\n      }\n\n      if (confirmCondition) {\n        setError('confirmPassword', \"Must match the previous entry\");\n        return false;\n      }\n\n      return true;\n    };\n\n    const errorElement = {\n      username: usernameError,\n      password: passwordError,\n      confirmPassword: confirmPasswordError\n    };\n\n    const setError = (ele, text) => {\n      document.getElementById(`${ele}Input`).style.border = \"solid 1px red\";\n      errorElement[ele].value = text;\n      console.log(errorElement);\n    };\n\n    const signUp = async () => {\n      const validate = validateOnBlur();\n      console.log('validateOnBlur', validate);\n\n      if (validate === true) {\n        const data = {\n          username: username.value,\n          password: password.value\n        };\n\n        try {\n          signUpRef.value.disabled = true;\n          signUpRef.value.classList.toggle('hover:bg-gray-500');\n          signUpRef.value.innerText = 'Signing up...';\n          const response = await axios.post('http://localhost:3000/auth/signup', data, {\n            headers: {\n              Accept: \"application/json\",\n              \"Content-Type\": \"application/json;charset=UTF-8\"\n            },\n            withCredentials: true\n          });\n          returnUser.value = response.data;\n          console.log(returnUser.value);\n          router.push('/auth/signin');\n        } catch (error) {\n          console.log(error);\n\n          if (error.response.status === 409) {\n            signUpRef.value.disabled = false;\n            signUpRef.value.classList.toggle('hover:bg-gray-500');\n            signUpRef.value.innerText = 'User register';\n            const usernameInputElement = document.getElementById('usernameInput');\n            usernameInputElement.style.border = \"solid 1px red\";\n            usernameError.value = \"Sorry, username already taken\";\n          }\n        }\n      }\n    };\n\n    const __returned__ = {\n      store,\n      username,\n      password,\n      confirmPassword,\n      usernameError,\n      passwordError,\n      confirmPasswordError,\n      signUpRef,\n      router,\n      inputChange,\n      inputFocus,\n      validateOnBlur,\n      errorElement,\n      setError,\n      signUp,\n      ref,\n      axios,\n      useRouter,\n      useStore\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"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","names":["ref","axios","useRouter","useStore","store","username","password","confirmPassword","usernameError","passwordError","confirmPasswordError","signUpRef","router","inputChange","value","length","inputFocus","id","inputElement","document","getElementById","style","border","validateOnBlur","usernameInputElement","passwordInputElement","confirmPasswordInputElement","usernameConditionBlank","valuelength","usernameConditionContainWhiteSpace","test","passwordCondition","confirmCondition","setError","errorElement","ele","text","console","log","signUp","validate","data","disabled","classList","toggle","innerText","response","post","headers","Accept","withCredentials","returnUser","push","error","status"],"sources":["E:/LapTrinh/NestJS/social-media-clone/frontend/src/components/auth/SignUp.vue"],"sourcesContent":["<template>\r\n  <section>\r\n    <div class=\" relative w-screen h-screen bg-gray-200 \">\r\n      <div class=\" absolute left-0 right-0 top-10 mx-auto w-1/3 rounded-sm border border-gray-100 bg-white p-10\">\r\n        <header class=\" w-full h-1/6 flex items-center pl-2 bg-pink-200 text-3xl mb-5\">Sign Up</header>\r\n        <label for=\"\" class=\" text-lg block\">Username<span class=\"text-red-500\">*</span></label>\r\n        <input id=\"usernameInput\" type=\"text\" class=\"border border-gray-200 h-10 w-full pl-2\" \r\n                          v-model=\"username\" @blur=\"validateOnBlur()\" @focus=\"inputFocus('usernameInput')\" @input=\"inputChange\">\r\n        <p class=\" text-xs text-gray-400\">(*) Username can't contain white space</p>\r\n        <p class=\" h-4 text-red-500\">{{ usernameError }}</p>\r\n        <br>\r\n\r\n        <label for=\"\" class=\" text-lg block\">Password<span class=\"text-red-500\">*</span></label>\r\n        <input id=\"passwordInput\" type=\"password\" class=\"border border-gray-200 h-10 w-full pl-2\" \r\n                          v-model=\"password\" @blur=\"validateOnBlur()\" @focus=\"inputFocus('passwordInput')\" @input=\"inputChange\">\r\n        <p class=\" h-4 text-red-500\">{{ passwordError }}</p>\r\n        <br>\r\n\r\n        <label for=\"\" class=\" text-lg block\">Confirm Password<span class=\"text-red-500\">*</span></label>\r\n        <input id=\"confirmPasswordInput\" type=\"password\" class=\"border border-gray-200 h-10 w-full pl-2\" \r\n                              v-model=\"confirmPassword\" @blur=\"validateOnBlur()\" @focus=\"inputFocus('confirmPasswordInput')\" @input=\"inputChange\">\r\n        <p class=\" h-4 text-red-500\">{{ confirmPasswordError }}</p>\r\n        <br>\r\n        <div>\r\n          <router-link to=\"/auth/signin\" class=\" text-sm text-sky-500 hover:underline hover:decoration-solid\">\r\n            Already have an account? Sign in \r\n          </router-link>\r\n        </div>\r\n\r\n        <button @click=\"signUp()\" class=\" mt-7 py-1 px-3 bg-black rounded-md \r\n                                    text-xl text-white hover:bg-gray-500\" ref=\"signUpRef\">User register</button>\r\n\r\n      </div>\r\n    </div>\r\n\r\n  </section>\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\nimport {useRouter} from \"vue-router\"\r\nimport {useStore} from \"vuex\"\r\n\r\nconst store = useStore();\r\n\r\nconst username = ref('');\r\nconst password = ref('');\r\nconst confirmPassword = ref('');\r\nconst usernameError = ref('');\r\nconst passwordError = ref('');\r\nconst confirmPasswordError = ref('');\r\n\r\nconst signUpRef = ref(null);\r\n\r\nconst router = useRouter();\r\n\r\nconst inputChange = () => {\r\n  if(username.value.length >= 4 && username.value.length <= 12) {\r\n    usernameError.value = '';\r\n  }\r\n  if(password.value.length >= 6 && password.value.length <= 12) {\r\n    passwordError.value = '';\r\n  }\r\n  if(confirmPassword.value.length > 0) {\r\n    confirmPasswordError.value = '';\r\n  }\r\n}\r\n\r\n\r\nconst inputFocus = (id) => {\r\n  const inputElement = document.getElementById(id);\r\n  inputElement.style.border = 'solid 1px black';\r\n}\r\n\r\nconst validateOnBlur = () => {\r\n  const usernameInputElement = document.getElementById('usernameInput');\r\n  const passwordInputElement = document.getElementById('passwordInput');\r\n  const confirmPasswordInputElement = document.getElementById('confirmPasswordInput');\r\n\r\n\r\n  const usernameConditionBlank = username.valuelength < 4 || password.value.length > 12;\r\n  const usernameConditionContainWhiteSpace = /\\s/.test(username.value);\r\n  const passwordCondition = password.value.length < 6 || password.value.length > 12;\r\n  const confirmCondition  = confirmPassword.value === '' || confirmPassword.value !== password.value;  \r\n\r\n  if (usernameConditionBlank && passwordCondition && confirmCondition) {\r\n    setError('username', \"Username can't be blank\");\r\n    setError('password', \"Password must contains 6-12 characters\");\r\n    setError('confirmPassword', \"Must match the previous entry\");\r\n    return false;\r\n  }\r\n  else if (usernameConditionContainWhiteSpace) {\r\n    setError('username', \"Username can't contain white space\");\r\n    return false;\r\n  }\r\n  else if(usernameConditionBlank) {\r\n    setError('username', \"Username can't be blank\");\r\n    return false;\r\n  }\r\n  if(passwordCondition) {\r\n    setError('password', \"Password must contains 6-12 characters\");\r\n    return false;\r\n  }\r\n  if(confirmCondition) {\r\n    setError('confirmPassword', \"Must match the previous entry\");\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n  \r\n}\r\n\r\nconst errorElement = {\r\n  username: usernameError,\r\n  password: passwordError,\r\n  confirmPassword: confirmPasswordError,\r\n}\r\n\r\nconst setError = (ele, text) => {\r\n  document.getElementById(`${ele}Input`).style.border = \"solid 1px red\";\r\n  errorElement[ele].value = text;\r\n  console.log(errorElement);\r\n}\r\n\r\nconst signUp = async () => {\r\n  const validate = validateOnBlur();\r\n  console.log('validateOnBlur', validate);\r\n  if(validate === true) {\r\n    const data = {\r\n      username: username.value,\r\n      password: password.value,\r\n    };\r\n    try {\r\n      signUpRef.value.disabled = true;\r\n      signUpRef.value.classList.toggle('hover:bg-gray-500');\r\n      signUpRef.value.innerText = 'Signing up...';\r\n      const response = await axios.post('http://localhost:3000/auth/signup', data, {\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        },\r\n        withCredentials: true,\r\n      });\r\n      returnUser.value = response.data;\r\n      console.log(returnUser.value);\r\n      router.push('/auth/signin')\r\n    } catch (error) {\r\n      console.log(error);\r\n      if (error.response.status === 409) {\r\n        signUpRef.value.disabled = false;\r\n        signUpRef.value.classList.toggle('hover:bg-gray-500');\r\n        signUpRef.value.innerText = 'User register';\r\n\r\n        const usernameInputElement = document.getElementById('usernameInput');\r\n        usernameInputElement.style.border = \"solid 1px red\";\r\n        usernameError.value = \"Sorry, username already taken\";\r\n      }\r\n    } \r\n  }\r\n\r\n\r\n};\r\n\r\n</script>\r\n\r\n"]},"metadata":{},"sourceType":"module"}